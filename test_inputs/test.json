{"format_version":"0.2","terraform_version":"1.0.6","planned_values":{"root_module":{"resources":[{"address":"aws_api_gateway_integration.MyDemoIntegration","mode":"managed","type":"aws_api_gateway_integration","name":"MyDemoIntegration","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cache_key_parameters":["method.request.path.param"],"cache_namespace":"foobar","connection_id":null,"connection_type":"INTERNET","content_handling":null,"credentials":null,"http_method":"GET","integration_http_method":null,"request_parameters":{"integration.request.header.X-Authorization":"'static'"},"request_templates":null,"timeout_milliseconds":29000,"tls_config":[],"type":"AWS_PROXY","uri":null},"sensitive_values":{"cache_key_parameters":[false],"request_parameters":{},"tls_config":[]}},{"address":"aws_api_gateway_method.MyDemoMethod","mode":"managed","type":"aws_api_gateway_method","name":"MyDemoMethod","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"api_key_required":false,"authorization":"NONE","authorization_scopes":null,"authorizer_id":null,"http_method":"GET","operation_name":null,"request_models":null,"request_parameters":null,"request_validator_id":null},"sensitive_values":{}},{"address":"aws_api_gateway_resource.MyDemoResource","mode":"managed","type":"aws_api_gateway_resource","name":"MyDemoResource","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"path_part":"mydemoresource"},"sensitive_values":{}},{"address":"aws_api_gateway_rest_api.MyDemoAPI","mode":"managed","type":"aws_api_gateway_rest_api","name":"MyDemoAPI","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"body":null,"description":"This is my API for demonstration purposes","fail_on_warnings":null,"name":"MyDemoAPI","parameters":null,"put_rest_api_mode":null,"tags":null},"sensitive_values":{"binary_media_types":[],"endpoint_configuration":[],"tags_all":{}}},{"address":"aws_cloudfront_distribution.example","mode":"managed","type":"aws_cloudfront_distribution","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"aliases":["domain_name_source"],"comment":null,"custom_error_response":[{"error_caching_min_ttl":3600,"error_code":403,"response_code":200,"response_page_path":"index.html"}],"default_cache_behavior":[{"allowed_methods":["DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"],"cache_policy_id":null,"cached_methods":["GET","HEAD"],"compress":true,"default_ttl":86400,"field_level_encryption_id":null,"forwarded_values":[{"cookies":[{"forward":"none"}],"query_string":false}],"function_association":[],"lambda_function_association":[],"max_ttl":86400,"min_ttl":0,"origin_request_policy_id":null,"realtime_log_config_arn":null,"response_headers_policy_id":null,"smooth_streaming":null,"target_origin_id":"example","viewer_protocol_policy":"redirect-to-https"}],"default_root_object":"index.html","enabled":true,"http_version":"http2","is_ipv6_enabled":false,"logging_config":[],"ordered_cache_behavior":[],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[],"domain_name":"domain_name","origin_access_control_id":"","origin_id":"example","origin_path":"","origin_shield":[],"s3_origin_config":[{}]}],"origin_group":[],"price_class":"PriceClass_100","restrictions":[{"geo_restriction":[{"restriction_type":"none"}]}],"retain_on_delete":false,"staging":false,"tags":null,"viewer_certificate":[{"acm_certificate_arn":"arn:aws:acm:us-east-1:000000000000:certificate/8d0fab65-ddc4-4aa2-b1b1-ac56255e3257","cloudfront_default_certificate":null,"iam_certificate_id":null,"minimum_protocol_version":"TLSv1.2_2021","ssl_support_method":"sni-only"}],"wait_for_deployment":true,"web_acl_id":null},"sensitive_values":{"aliases":[false],"custom_error_response":[{}],"default_cache_behavior":[{"allowed_methods":[false,false,false,false,false,false,false],"cached_methods":[false,false],"forwarded_values":[{"cookies":[{"whitelisted_names":[]}],"headers":[],"query_string_cache_keys":[]}],"function_association":[],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"logging_config":[],"ordered_cache_behavior":[],"origin":[{"custom_header":[],"custom_origin_config":[],"origin_shield":[],"s3_origin_config":[{}]}],"origin_group":[],"restrictions":[{"geo_restriction":[{"locations":[]}]}],"tags_all":{},"trusted_key_groups":[],"trusted_signers":[],"viewer_certificate":[{}]}},{"address":"aws_cloudfront_origin_access_identity.example","mode":"managed","type":"aws_cloudfront_origin_access_identity","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"comment":"Allow CloudFront to reach the S3 bucket for domain"},"sensitive_values":{}},{"address":"aws_cloudwatch_log_group.dada","mode":"managed","type":"aws_cloudwatch_log_group","name":"dada","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"kms_key_id":null,"name":"MyApp/access.log","retention_in_days":0,"skip_destroy":false,"tags":null},"sensitive_values":{"tags_all":{}}},{"address":"aws_cloudwatch_log_metric_filter.yada","mode":"managed","type":"aws_cloudwatch_log_metric_filter","name":"yada","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"log_group_name":"MyApp/access.log","metric_transformation":[{"default_value":null,"dimensions":null,"name":"EventCount","namespace":"YourNamespace","unit":"None","value":"1"}],"name":"MyAppAccessCount","pattern":"/\"levelname\": \"ERROR\"/"},"sensitive_values":{"metric_transformation":[{}]}},{"address":"aws_ecs_cluster.ecs-cluster","mode":"managed","type":"aws_ecs_cluster","name":"ecs-cluster","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"configuration":[],"name":"ecs-cluster","service_connect_defaults":[],"tags":null},"sensitive_values":{"configuration":[],"service_connect_defaults":[],"setting":[],"tags_all":{}}},{"address":"aws_ecs_service.main","mode":"managed","type":"aws_ecs_service","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":1,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_new_deployment":null,"health_check_grace_period_seconds":null,"launch_type":"FARGATE","load_balancer":[],"name":"ecs-service-service","network_configuration":[{"assign_public_ip":false,"security_groups":null,"subnets":null}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":"1.4.0","propagate_tags":"SERVICE","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":null,"timeouts":null,"wait_for_steady_state":false},"sensitive_values":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"load_balancer":[],"network_configuration":[{}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags_all":{},"triggers":{}}},{"address":"aws_ecs_task_definition.ecs-service","mode":"managed","type":"aws_ecs_task_definition","name":"ecs-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"container_definitions":"[{\"image\":\"fooBar\",\"name\":\"foo bar\"}]","cpu":null,"ephemeral_storage":[],"family":"ecs-cluster","inference_accelerator":[],"ipc_mode":null,"memory":null,"network_mode":"awsvpc","pid_mode":null,"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"runtime_platform":[],"skip_destroy":false,"tags":null,"task_role_arn":null,"volume":[]},"sensitive_values":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags_all":{},"volume":[]}},{"address":"aws_iam_policy.AssumeRole_passes","mode":"managed","type":"aws_iam_policy","name":"AssumeRole_passes","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Assume roles don't need a account condition","name":"AssumeRole_passes","path":"/","policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","tags":{"CostCentre":"tf-acc-test-iam-policy","Terraform":"test"},"tags_all":{"CostCentre":"tf-acc-test-iam-policy","Terraform":"test"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_iam_policy.not_a_service_prinicpal_passes","mode":"managed","type":"aws_iam_policy","name":"not_a_service_prinicpal_passes","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Passes without a service principal","name":"not_a_service_prinicpal_passes","path":"/","policy":"{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"555555555555\",\"123456789012\"]}}],\"Version\":\"2012-10-17\"}","tags":{"CostCentre":"tf-acc-test-iam-policy","Terraform":"test"},"tags_all":{"CostCentre":"tf-acc-test-iam-policy","Terraform":"test"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_iam_policy.s3_service_principal_fails","mode":"managed","type":"aws_iam_policy","name":"s3_service_principal_fails","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Fails without an account condition","name":"Service_principal_fails","path":"/","policy":"{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"s3.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","tags":{"CostCentre":"tf-acc-test-iam-policy","Terraform":"test"},"tags_all":{"CostCentre":"tf-acc-test-iam-policy","Terraform":"test"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_iam_policy.s3_service_principal_passes","mode":"managed","type":"aws_iam_policy","name":"s3_service_principal_passes","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Passes with an account condition","name":"Service_principal_passes","path":"/","policy":"{\"Statement\":[{\"Action\":\"kms:*\",\"Condition\":{\"StringLike\":{\"AWS:SourceAccount\":\"account\"}},\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"s3.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","tags":{"CostCentre":"tf-acc-test-iam-policy","Terraform":"test"},"tags_all":{"CostCentre":"tf-acc-test-iam-policy","Terraform":"test"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_iam_role.ecs-service","mode":"managed","type":"aws_iam_role","name":"ecs-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ecs-role","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"aws_iam_role.iam_for_lambda","mode":"managed","type":"aws_iam_role","name":"iam_for_lambda","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"iam_for_lambda","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"aws_iam_role.iam_for_lambda_with_eni","mode":"managed","type":"aws_iam_role","name":"iam_for_lambda_with_eni","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"iam_for_lambda_with_eni","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"aws_iam_role_policy_attachment.lambda","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole","role":"iam_for_lambda_with_eni"},"sensitive_values":{}},{"address":"aws_lambda_function.test_lambda_with_bad_runtime","mode":"managed","type":"aws_lambda_function","name":"test_lambda_with_bad_runtime","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"code_signing_config_arn":null,"dead_letter_config":[],"description":null,"environment":[],"file_system_config":[],"filename":"mocks/test.zip","function_name":"test_lambda_with_bad_runtime","handler":"index.test","image_config":[],"image_uri":null,"kms_key_arn":null,"layers":null,"memory_size":128,"package_type":"Zip","publish":false,"replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"runtime":"nodejs12.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"skip_destroy":false,"snap_start":[],"source_code_hash":"55O3slT2emNC41dVY7jnD4xLKHt0tS8mpR1lV8vQHws=","tags":null,"timeout":3,"timeouts":null,"vpc_config":[]},"sensitive_values":{"architectures":[],"dead_letter_config":[],"environment":[],"ephemeral_storage":[],"file_system_config":[],"image_config":[],"snap_start":[],"tags_all":{},"tracing_config":[],"vpc_config":[]}},{"address":"aws_lambda_function.test_lambda_with_good_runtime","mode":"managed","type":"aws_lambda_function","name":"test_lambda_with_good_runtime","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"code_signing_config_arn":null,"dead_letter_config":[],"description":null,"environment":[],"file_system_config":[],"filename":"mocks/test.zip","function_name":"test_lambda_with_good_runtime","handler":"index.test","image_config":[],"image_uri":null,"kms_key_arn":null,"layers":null,"memory_size":128,"package_type":"Zip","publish":false,"replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"runtime":"nodejs18.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"skip_destroy":false,"snap_start":[],"source_code_hash":"55O3slT2emNC41dVY7jnD4xLKHt0tS8mpR1lV8vQHws=","tags":null,"timeout":3,"timeouts":null,"vpc_config":[]},"sensitive_values":{"architectures":[],"dead_letter_config":[],"environment":[],"ephemeral_storage":[],"file_system_config":[],"image_config":[],"snap_start":[],"tags_all":{},"tracing_config":[],"vpc_config":[]}},{"address":"aws_lambda_function.test_vpc_lambda_with_eni_policy","mode":"managed","type":"aws_lambda_function","name":"test_vpc_lambda_with_eni_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"code_signing_config_arn":null,"dead_letter_config":[],"description":null,"environment":[],"file_system_config":[],"filename":"mocks/test.zip","function_name":"test_vpc_lambda_with_eni_policy","handler":"index.test","image_config":[],"image_uri":null,"kms_key_arn":null,"layers":null,"memory_size":128,"package_type":"Zip","publish":false,"replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"runtime":"nodejs16.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"skip_destroy":false,"snap_start":[],"source_code_hash":"55O3slT2emNC41dVY7jnD4xLKHt0tS8mpR1lV8vQHws=","tags":null,"timeout":3,"timeouts":null,"vpc_config":[{"ipv6_allowed_for_dual_stack":false,"security_group_ids":null,"subnet_ids":null}]},"sensitive_values":{"architectures":[],"dead_letter_config":[],"environment":[],"ephemeral_storage":[],"file_system_config":[],"image_config":[],"snap_start":[],"tags_all":{},"tracing_config":[],"vpc_config":[{}]}},{"address":"aws_lambda_function.test_vpc_lambda_with_missing_eni_policy","mode":"managed","type":"aws_lambda_function","name":"test_vpc_lambda_with_missing_eni_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"code_signing_config_arn":null,"dead_letter_config":[],"description":null,"environment":[],"file_system_config":[],"filename":"mocks/test.zip","function_name":"test_vpc_lambda_with_missing_eni_policy","handler":"index.test","image_config":[],"image_uri":null,"kms_key_arn":null,"layers":null,"memory_size":128,"package_type":"Zip","publish":false,"replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"runtime":"nodejs16.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"skip_destroy":false,"snap_start":[],"source_code_hash":"55O3slT2emNC41dVY7jnD4xLKHt0tS8mpR1lV8vQHws=","tags":null,"timeout":3,"timeouts":null,"vpc_config":[{"ipv6_allowed_for_dual_stack":false,"security_group_ids":null,"subnet_ids":null}]},"sensitive_values":{"architectures":[],"dead_letter_config":[],"environment":[],"ephemeral_storage":[],"file_system_config":[],"image_config":[],"snap_start":[],"tags_all":{},"tracing_config":[],"vpc_config":[{}]}},{"address":"aws_security_group.bad_ports_for_protocol","mode":"managed","type":"aws_security_group","name":"bad_ports_for_protocol","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":443}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":443}],"name":"bad_ports_for_protocol","revoke_rules_on_delete":false,"tags":{"CostCentre":"tf-test-sg","Terraform":"test"},"tags_all":{"CostCentre":"tf-test-sg","Terraform":"test"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"aws_security_group.good_ports_for_protocol","mode":"managed","type":"aws_security_group","name":"good_ports_for_protocol","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"name":"good_ports_for_protocol","revoke_rules_on_delete":false,"tags":{"CostCentre":"tf-test-sg","Terraform":"test"},"tags_all":{"CostCentre":"tf-test-sg","Terraform":"test"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"aws_security_group.tcp_protocol","mode":"managed","type":"aws_security_group","name":"tcp_protocol","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"tcp_protocol","revoke_rules_on_delete":false,"tags":{"CostCentre":"tf-test-sg","Terraform":"test"},"tags_all":{"CostCentre":"tf-test-sg","Terraform":"test"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"aws_wafv2_web_acl.better_gandalf","mode":"managed","type":"aws_wafv2_web_acl","name":"better_gandalf","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"association_config":[],"captcha_config":[],"custom_response_body":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"description":"None shall pass","name":"blocker","rule":[{"action":[],"captcha_config":[],"name":"AWSManagedRulesKnownBadInputsRuleSet","override_action":[{"count":[],"none":[{}]}],"priority":1,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"name":"AWSManagedRulesKnownBadInputsRuleSet","rule_action_override":[],"scope_down_statement":[],"vendor_name":"AWS","version":""}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"AWSManagedRulesKnownBadInputsRuleSet","sampled_requests_enabled":true}]},{"action":[],"captcha_config":[],"name":"AWSManagedRulesLinuxRuleSet","override_action":[{"count":[],"none":[{}]}],"priority":2,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"name":"AWSManagedRulesLinuxRuleSet","rule_action_override":[],"scope_down_statement":[],"vendor_name":"AWS","version":""}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"AWSManagedRulesLinuxRuleSet","sampled_requests_enabled":true}]}],"scope":"CLOUDFRONT","tags":null,"token_domains":null,"visibility_config":[{"cloudwatch_metrics_enabled":false,"metric_name":"friendly-metric-name","sampled_requests_enabled":false}]},"sensitive_values":{"association_config":[],"captcha_config":[],"custom_response_body":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"rule":[{"action":[],"captcha_config":[],"override_action":[{"count":[],"none":[{}]}],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"rule_action_override":[],"scope_down_statement":[]}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[],"captcha_config":[],"override_action":[{"count":[],"none":[{}]}],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"rule_action_override":[],"scope_down_statement":[]}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]}],"tags_all":{},"visibility_config":[{}]}},{"address":"aws_wafv2_web_acl.gandalf","mode":"managed","type":"aws_wafv2_web_acl","name":"gandalf","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"association_config":[],"captcha_config":[],"custom_response_body":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"description":"None shall pass","name":"blocker","rule":[{"action":[],"captcha_config":[],"name":"AWSManagedRulesKnownBadInputsRuleSet","override_action":[{"count":[],"none":[{}]}],"priority":1,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"name":"AWSManagedRulesKnownBadInputsRuleSet","rule_action_override":[],"scope_down_statement":[],"vendor_name":"AWS","version":""}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"AWSManagedRulesKnownBadInputsRuleSet","sampled_requests_enabled":true}]},{"action":[],"captcha_config":[],"name":"AWSManagedRulesLinuxRuleSet","override_action":[{"count":[],"none":[{}]}],"priority":1,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"name":"AWSManagedRulesLinuxRuleSet","rule_action_override":[],"scope_down_statement":[],"vendor_name":"AWS","version":""}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"AWSManagedRulesLinuxRuleSet","sampled_requests_enabled":true}]}],"scope":"CLOUDFRONT","tags":null,"token_domains":null,"visibility_config":[{"cloudwatch_metrics_enabled":false,"metric_name":"friendly-metric-name","sampled_requests_enabled":false}]},"sensitive_values":{"association_config":[],"captcha_config":[],"custom_response_body":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"rule":[{"action":[],"captcha_config":[],"override_action":[{"count":[],"none":[{}]}],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"rule_action_override":[],"scope_down_statement":[]}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[],"captcha_config":[],"override_action":[{"count":[],"none":[{}]}],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"rule_action_override":[],"scope_down_statement":[]}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]}],"tags_all":{},"visibility_config":[{}]}}],"child_modules":[{"resources":[{"address":"module.rds.aws_cloudwatch_log_group.log_exports[\"postgresql\"]","mode":"managed","type":"aws_cloudwatch_log_group","name":"log_exports","index":"postgresql","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"kms_key_id":null,"name":"/aws/rds/cluster/test-rds-cluster/postgresql","retention_in_days":30,"skip_destroy":false,"tags":{"CostCentre":"cal","Name":"test-rds-cluster","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"test-rds-cluster","Terraform":"true"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.rds.aws_cloudwatch_log_group.proxy","mode":"managed","type":"aws_cloudwatch_log_group","name":"proxy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"kms_key_id":null,"name":"/aws/rds/proxy/test-rds-proxy","retention_in_days":14,"skip_destroy":false,"tags":{"CostCentre":"cal","Name":"test-rds_proxy_logs","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"test-rds_proxy_logs","Terraform":"true"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.rds.aws_db_proxy.proxy","mode":"managed","type":"aws_db_proxy","name":"proxy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auth":[{"auth_scheme":"SECRETS","description":"The database connection string","iam_auth":"DISABLED","username":null}],"debug_logging":false,"engine_family":"POSTGRESQL","idle_client_timeout":1800,"name":"test-rds-proxy","require_tls":true,"tags":{"CostCentre":"cal","Name":"test-rds-rds-proxy","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"test-rds-rds-proxy","Terraform":"true"},"timeouts":null},"sensitive_values":{"auth":[{}],"tags":{},"tags_all":{},"vpc_security_group_ids":[],"vpc_subnet_ids":[]}},{"address":"module.rds.aws_db_proxy_default_target_group.this","mode":"managed","type":"aws_db_proxy_default_target_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"db_proxy_name":"test-rds-proxy","timeouts":null},"sensitive_values":{"connection_pool_config":[]}},{"address":"module.rds.aws_db_proxy_target.target","mode":"managed","type":"aws_db_proxy_target","name":"target","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"db_instance_identifier":null,"db_proxy_name":"test-rds-proxy"},"sensitive_values":{}},{"address":"module.rds.aws_db_subnet_group.rds","mode":"managed","type":"aws_db_subnet_group","name":"rds","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Managed by Terraform","name":"test-rds-subnet-group","tags":{"CostCentre":"cal","Name":"test-rds-subnet-group","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"test-rds-subnet-group","Terraform":"true"}},"sensitive_values":{"subnet_ids":[],"supported_network_types":[],"tags":{},"tags_all":{}}},{"address":"module.rds.aws_iam_policy.read_connection_string","mode":"managed","type":"aws_iam_policy","name":"read_connection_string","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"name":"test-rdsReadConnectionString","path":"/","tags":{"CostCentre":"cal","Terraform":"true"},"tags_all":{"CostCentre":"cal","Terraform":"true"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.rds.aws_iam_role.rds_proxy","mode":"managed","type":"aws_iam_role","name":"rds_proxy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"rds.amazonaws.com\"},\"Sid\":\"RDSAssume\"}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"test-rds_rds_proxy","path":"/","permissions_boundary":null,"tags":{"CostCentre":"cal","Terraform":"true"},"tags_all":{"CostCentre":"cal","Terraform":"true"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}},{"address":"module.rds.aws_iam_role_policy_attachment.read_connection_string","mode":"managed","type":"aws_iam_role_policy_attachment","name":"read_connection_string","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"role":"test-rds_rds_proxy"},"sensitive_values":{}},{"address":"module.rds.aws_rds_cluster.cluster","mode":"managed","type":"aws_rds_cluster","name":"cluster","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allow_major_version_upgrade":false,"apply_immediately":false,"backtrack_window":0,"backup_retention_period":7,"cluster_identifier":"test-rds-cluster","copy_tags_to_snapshot":true,"database_name":"foo","db_cluster_instance_class":null,"db_instance_parameter_group_name":null,"db_subnet_group_name":"test-rds-subnet-group","deletion_protection":true,"enable_global_write_forwarding":false,"enable_http_endpoint":false,"enabled_cloudwatch_logs_exports":["postgresql"],"engine":"aurora-postgresql","engine_mode":"provisioned","engine_version":"13.3","global_cluster_identifier":null,"iam_database_authentication_enabled":null,"iops":null,"manage_master_user_password":null,"master_password":"foo","master_username":"calvin","preferred_backup_window":"07:00-09:00","preferred_maintenance_window":"sun:06:00-sun:07:00","replication_source_identifier":null,"restore_to_point_in_time":[],"s3_import":[],"scaling_configuration":[],"serverlessv2_scaling_configuration":[],"skip_final_snapshot":false,"snapshot_identifier":null,"source_region":null,"storage_encrypted":true,"tags":{"CostCentre":"cal","Name":"test-rds-cluster","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"test-rds-cluster","Terraform":"true"},"timeouts":null},"sensitive_values":{"availability_zones":[],"cluster_members":[],"enabled_cloudwatch_logs_exports":[false],"iam_roles":[],"master_password":true,"master_user_secret":[],"restore_to_point_in_time":[],"s3_import":[],"scaling_configuration":[],"serverlessv2_scaling_configuration":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}},{"address":"module.rds.aws_rds_cluster_instance.instances[0]","mode":"managed","type":"aws_rds_cluster_instance","name":"instances","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_minor_version_upgrade":true,"copy_tags_to_snapshot":false,"custom_iam_instance_profile":null,"db_subnet_group_name":"test-rds-subnet-group","engine":"aurora-postgresql","engine_version":"13.3","identifier":"test-rds-instance-0","instance_class":"db.t3.medium","monitoring_interval":0,"performance_insights_enabled":true,"promotion_tier":0,"publicly_accessible":false,"tags":{"CostCentre":"cal","Name":"test-rds-instance-0","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"test-rds-instance-0","Terraform":"true"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.rds.aws_rds_cluster_instance.instances[1]","mode":"managed","type":"aws_rds_cluster_instance","name":"instances","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_minor_version_upgrade":true,"copy_tags_to_snapshot":false,"custom_iam_instance_profile":null,"db_subnet_group_name":"test-rds-subnet-group","engine":"aurora-postgresql","engine_version":"13.3","identifier":"test-rds-instance-1","instance_class":"db.t3.medium","monitoring_interval":0,"performance_insights_enabled":true,"promotion_tier":0,"publicly_accessible":false,"tags":{"CostCentre":"cal","Name":"test-rds-instance-1","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"test-rds-instance-1","Terraform":"true"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.rds.aws_rds_cluster_instance.instances[2]","mode":"managed","type":"aws_rds_cluster_instance","name":"instances","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_minor_version_upgrade":true,"copy_tags_to_snapshot":false,"custom_iam_instance_profile":null,"db_subnet_group_name":"test-rds-subnet-group","engine":"aurora-postgresql","engine_version":"13.3","identifier":"test-rds-instance-2","instance_class":"db.t3.medium","monitoring_interval":0,"performance_insights_enabled":true,"promotion_tier":0,"publicly_accessible":false,"tags":{"CostCentre":"cal","Name":"test-rds-instance-2","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"test-rds-instance-2","Terraform":"true"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.rds.aws_secretsmanager_secret.connection_string","mode":"managed","type":"aws_secretsmanager_secret","name":"connection_string","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"force_overwrite_replica_secret":false,"kms_key_id":null,"recovery_window_in_days":30,"tags":{"CostCentre":"cal","Terraform":"true"},"tags_all":{"CostCentre":"cal","Terraform":"true"}},"sensitive_values":{"replica":[],"tags":{},"tags_all":{}}},{"address":"module.rds.aws_secretsmanager_secret.proxy_connection_string","mode":"managed","type":"aws_secretsmanager_secret","name":"proxy_connection_string","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"force_overwrite_replica_secret":false,"kms_key_id":null,"recovery_window_in_days":30,"tags":{"CostCentre":"cal","Terraform":"true"},"tags_all":{"CostCentre":"cal","Terraform":"true"}},"sensitive_values":{"replica":[],"tags":{},"tags_all":{}}},{"address":"module.rds.aws_secretsmanager_secret_version.connection_string","mode":"managed","type":"aws_secretsmanager_secret_version","name":"connection_string","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"secret_binary":null,"secret_string":"{\"password\":\"foo\",\"username\":\"calvin\"}"},"sensitive_values":{"secret_string":true,"version_stages":[]}},{"address":"module.rds.aws_secretsmanager_secret_version.proxy_connection_string","mode":"managed","type":"aws_secretsmanager_secret_version","name":"proxy_connection_string","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"secret_binary":null},"sensitive_values":{"secret_string":true,"version_stages":[]}},{"address":"module.rds.aws_security_group.rds_proxy","mode":"managed","type":"aws_security_group","name":"rds_proxy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"The Security group that allows communication between the proxy and the database","egress":[{"cidr_blocks":[],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":true,"to_port":5432}],"ingress":[{"cidr_blocks":[],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":true,"to_port":5432}],"name":"test-rds_rds_proxy_sg","revoke_rules_on_delete":false,"tags":{"CostCentre":"cal","Name":"test-rds_rds_proxy_sg","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"test-rds_rds_proxy_sg","Terraform":"true"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.rds.data.aws_iam_policy_document.read_connection_string","mode":"data","type":"aws_iam_policy_document","name":"read_connection_string","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"override_policy_documents":null,"policy_id":null,"source_policy_documents":null,"statement":[{"actions":["secretsmanager:DescribeSecret","secretsmanager:GetResourcePolicy","secretsmanager:GetSecretValue","secretsmanager:ListSecretVersionIds"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":"0"},{"actions":["secretsmanager:ListSecrets"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":"1"},{"actions":["kms:Decrypt"],"condition":[{"test":"StringEquals","values":["secretsmanager.ca-central-1.amazonaws.com"],"variable":"kms:ViaService"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":"2"}],"version":null},"sensitive_values":{"statement":[{"actions":[false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false],"condition":[{"values":[false]}],"not_principals":[],"principals":[],"resources":[false]}]}},{"address":"module.rds.random_string.random","mode":"managed","type":"random_string","name":"random","provider_name":"registry.terraform.io/hashicorp/random","schema_version":2,"values":{"keepers":null,"length":6,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":false,"upper":false},"sensitive_values":{}}],"address":"module.rds"},{"resources":[{"address":"module.vpc.aws_default_network_acl.default","mode":"managed","type":"aws_default_network_acl","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"egress":[],"ingress":[],"subnet_ids":null,"tags":{"CostCentre":"cal","Name":"vpc_default_nacl","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc_default_nacl","Terraform":"true"}},"sensitive_values":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_default_route_table.default","mode":"managed","type":"aws_default_route_table","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"propagating_vgws":null,"route":[],"tags":{"CostCentre":"cal","Terraform":"true","name":"vpc_default_route_table"},"tags_all":{"CostCentre":"cal","Terraform":"true","name":"vpc_default_route_table"},"timeouts":null},"sensitive_values":{"route":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_default_security_group.default","mode":"managed","type":"aws_default_security_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"revoke_rules_on_delete":false,"tags":{"CostCentre":"cal","Name":"vpc_default_sg","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc_default_sg","Terraform":"true"}},"sensitive_values":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_internet_gateway.gw","mode":"managed","type":"aws_internet_gateway","name":"gw","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"CostCentre":"cal","Name":"vpc_internet_gateway","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc_internet_gateway","Terraform":"true"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_nat_gateway.nat_gw[0]","mode":"managed","type":"aws_nat_gateway","name":"nat_gw","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allocation_id":"","connectivity_type":"private","secondary_allocation_ids":null,"tags":{"CostCentre":"cal","Name":"vpc-natgw-0","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc-natgw-0","Terraform":"true"},"timeouts":null},"sensitive_values":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_nat_gateway.nat_gw[1]","mode":"managed","type":"aws_nat_gateway","name":"nat_gw","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allocation_id":"","connectivity_type":"private","secondary_allocation_ids":null,"tags":{"CostCentre":"cal","Name":"vpc-natgw-1","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc-natgw-1","Terraform":"true"},"timeouts":null},"sensitive_values":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_nat_gateway.nat_gw[2]","mode":"managed","type":"aws_nat_gateway","name":"nat_gw","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"allocation_id":"","connectivity_type":"private","secondary_allocation_ids":null,"tags":{"CostCentre":"cal","Name":"vpc-natgw-2","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc-natgw-2","Terraform":"true"},"timeouts":null},"sensitive_values":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_network_acl.main","mode":"managed","type":"aws_network_acl","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"CostCentre":"cal","Name":"vpc_main_nacl","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc_main_nacl","Terraform":"true"}},"sensitive_values":{"egress":[],"ingress":[],"subnet_ids":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_network_acl_rule.block_rdp[0]","mode":"managed","type":"aws_network_acl_rule","name":"block_rdp","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_block":"0.0.0.0/0","egress":false,"from_port":3389,"icmp_code":null,"icmp_type":null,"ipv6_cidr_block":null,"protocol":"tcp","rule_action":"deny","rule_number":51,"to_port":3389},"sensitive_values":{}},{"address":"module.vpc.aws_network_acl_rule.block_ssh[0]","mode":"managed","type":"aws_network_acl_rule","name":"block_ssh","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"cidr_block":"0.0.0.0/0","egress":false,"from_port":22,"icmp_code":null,"icmp_type":null,"ipv6_cidr_block":null,"protocol":"tcp","rule_action":"deny","rule_number":50,"to_port":22},"sensitive_values":{}},{"address":"module.vpc.aws_route.private_nat_gateway[0]","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"sensitive_values":{"timeouts":{}}},{"address":"module.vpc.aws_route.private_nat_gateway[1]","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"sensitive_values":{"timeouts":{}}},{"address":"module.vpc.aws_route.private_nat_gateway[2]","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"sensitive_values":{"timeouts":{}}},{"address":"module.vpc.aws_route.public_internet_gateway","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"local_gateway_id":null,"nat_gateway_id":null,"timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"sensitive_values":{"timeouts":{}}},{"address":"module.vpc.aws_route_table.private[0]","mode":"managed","type":"aws_route_table","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"CostCentre":"cal","Name":"vpc_private_route_table_0","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc_private_route_table_0","Terraform":"true"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table.private[1]","mode":"managed","type":"aws_route_table","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"CostCentre":"cal","Name":"vpc_private_route_table_1","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc_private_route_table_1","Terraform":"true"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table.private[2]","mode":"managed","type":"aws_route_table","name":"private","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"CostCentre":"cal","Name":"vpc_private_route_table_2","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc_private_route_table_2","Terraform":"true"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"CostCentre":"cal","Name":"vpc_public_route_table","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc_public_route_table","Terraform":"true"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_route_table_association.private[0]","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table_association.private[1]","mode":"managed","type":"aws_route_table_association","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table_association.private[2]","mode":"managed","type":"aws_route_table_association","name":"private","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table_association.public[0]","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table_association.public[1]","mode":"managed","type":"aws_route_table_association","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.vpc.aws_route_table_association.public[2]","mode":"managed","type":"aws_route_table_association","name":"public","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.vpc.aws_subnet.private[0]","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ca-central-1a","cidr_block":"10.0.0.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"CostCentre":"cal","Name":"vpc_private_subnet_ca-central-1a","Terraform":"true","Tier":"Private"},"tags_all":{"CostCentre":"cal","Name":"vpc_private_subnet_ca-central-1a","Terraform":"true","Tier":"Private"},"timeouts":{"create":null,"delete":"40m"}},"sensitive_values":{"tags":{},"tags_all":{},"timeouts":{}}},{"address":"module.vpc.aws_subnet.private[1]","mode":"managed","type":"aws_subnet","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ca-central-1b","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"CostCentre":"cal","Name":"vpc_private_subnet_ca-central-1b","Terraform":"true","Tier":"Private"},"tags_all":{"CostCentre":"cal","Name":"vpc_private_subnet_ca-central-1b","Terraform":"true","Tier":"Private"},"timeouts":{"create":null,"delete":"40m"}},"sensitive_values":{"tags":{},"tags_all":{},"timeouts":{}}},{"address":"module.vpc.aws_subnet.private[2]","mode":"managed","type":"aws_subnet","name":"private","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ca-central-1d","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"CostCentre":"cal","Name":"vpc_private_subnet_ca-central-1d","Terraform":"true","Tier":"Private"},"tags_all":{"CostCentre":"cal","Name":"vpc_private_subnet_ca-central-1d","Terraform":"true","Tier":"Private"},"timeouts":{"create":null,"delete":"40m"}},"sensitive_values":{"tags":{},"tags_all":{},"timeouts":{}}},{"address":"module.vpc.aws_subnet.public[0]","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ca-central-1a","cidr_block":"10.0.3.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"CostCentre":"cal","Name":"vpc_public_subnet_ca-central-1a","Terraform":"true","Tier":"Public"},"tags_all":{"CostCentre":"cal","Name":"vpc_public_subnet_ca-central-1a","Terraform":"true","Tier":"Public"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.public[1]","mode":"managed","type":"aws_subnet","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ca-central-1b","cidr_block":"10.0.4.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"CostCentre":"cal","Name":"vpc_public_subnet_ca-central-1b","Terraform":"true","Tier":"Public"},"tags_all":{"CostCentre":"cal","Name":"vpc_public_subnet_ca-central-1b","Terraform":"true","Tier":"Public"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_subnet.public[2]","mode":"managed","type":"aws_subnet","name":"public","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"ca-central-1d","cidr_block":"10.0.5.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"CostCentre":"cal","Name":"vpc_public_subnet_ca-central-1d","Terraform":"true","Tier":"Public"},"tags_all":{"CostCentre":"cal","Name":"vpc_public_subnet_ca-central-1d","Terraform":"true","Tier":"Public"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpc.aws_vpc.main","mode":"managed","type":"aws_vpc","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.0.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"CostCentre":"cal","Name":"vpc_vpc","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc_vpc","Terraform":"true"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.vpc"}]}},"resource_changes":[{"address":"aws_api_gateway_integration.MyDemoIntegration","mode":"managed","type":"aws_api_gateway_integration","name":"MyDemoIntegration","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cache_key_parameters":["method.request.path.param"],"cache_namespace":"foobar","connection_id":null,"connection_type":"INTERNET","content_handling":null,"credentials":null,"http_method":"GET","integration_http_method":null,"request_parameters":{"integration.request.header.X-Authorization":"'static'"},"request_templates":null,"timeout_milliseconds":29000,"tls_config":[],"type":"AWS_PROXY","uri":null},"after_unknown":{"cache_key_parameters":[false],"id":true,"passthrough_behavior":true,"request_parameters":{},"resource_id":true,"rest_api_id":true,"tls_config":[]},"before_sensitive":false,"after_sensitive":{"cache_key_parameters":[false],"request_parameters":{},"tls_config":[]}}},{"address":"aws_api_gateway_method.MyDemoMethod","mode":"managed","type":"aws_api_gateway_method","name":"MyDemoMethod","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"api_key_required":false,"authorization":"NONE","authorization_scopes":null,"authorizer_id":null,"http_method":"GET","operation_name":null,"request_models":null,"request_parameters":null,"request_validator_id":null},"after_unknown":{"id":true,"resource_id":true,"rest_api_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_api_gateway_resource.MyDemoResource","mode":"managed","type":"aws_api_gateway_resource","name":"MyDemoResource","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"path_part":"mydemoresource"},"after_unknown":{"id":true,"parent_id":true,"path":true,"rest_api_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_api_gateway_rest_api.MyDemoAPI","mode":"managed","type":"aws_api_gateway_rest_api","name":"MyDemoAPI","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"body":null,"description":"This is my API for demonstration purposes","fail_on_warnings":null,"name":"MyDemoAPI","parameters":null,"put_rest_api_mode":null,"tags":null},"after_unknown":{"api_key_source":true,"arn":true,"binary_media_types":true,"created_date":true,"disable_execute_api_endpoint":true,"endpoint_configuration":true,"execution_arn":true,"id":true,"minimum_compression_size":true,"policy":true,"root_resource_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"binary_media_types":[],"endpoint_configuration":[],"tags_all":{}}}},{"address":"aws_cloudfront_distribution.example","mode":"managed","type":"aws_cloudfront_distribution","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"aliases":["domain_name_source"],"comment":null,"custom_error_response":[{"error_caching_min_ttl":3600,"error_code":403,"response_code":200,"response_page_path":"index.html"}],"default_cache_behavior":[{"allowed_methods":["DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"],"cache_policy_id":null,"cached_methods":["GET","HEAD"],"compress":true,"default_ttl":86400,"field_level_encryption_id":null,"forwarded_values":[{"cookies":[{"forward":"none"}],"query_string":false}],"function_association":[],"lambda_function_association":[],"max_ttl":86400,"min_ttl":0,"origin_request_policy_id":null,"realtime_log_config_arn":null,"response_headers_policy_id":null,"smooth_streaming":null,"target_origin_id":"example","viewer_protocol_policy":"redirect-to-https"}],"default_root_object":"index.html","enabled":true,"http_version":"http2","is_ipv6_enabled":false,"logging_config":[],"ordered_cache_behavior":[],"origin":[{"connection_attempts":3,"connection_timeout":10,"custom_header":[],"custom_origin_config":[],"domain_name":"domain_name","origin_access_control_id":"","origin_id":"example","origin_path":"","origin_shield":[],"s3_origin_config":[{}]}],"origin_group":[],"price_class":"PriceClass_100","restrictions":[{"geo_restriction":[{"restriction_type":"none"}]}],"retain_on_delete":false,"staging":false,"tags":null,"viewer_certificate":[{"acm_certificate_arn":"arn:aws:acm:us-east-1:000000000000:certificate/8d0fab65-ddc4-4aa2-b1b1-ac56255e3257","cloudfront_default_certificate":null,"iam_certificate_id":null,"minimum_protocol_version":"TLSv1.2_2021","ssl_support_method":"sni-only"}],"wait_for_deployment":true,"web_acl_id":null},"after_unknown":{"aliases":[false],"arn":true,"caller_reference":true,"continuous_deployment_policy_id":true,"custom_error_response":[{}],"default_cache_behavior":[{"allowed_methods":[false,false,false,false,false,false,false],"cached_methods":[false,false],"forwarded_values":[{"cookies":[{"whitelisted_names":true}],"headers":true,"query_string_cache_keys":true}],"function_association":[],"lambda_function_association":[],"trusted_key_groups":true,"trusted_signers":true}],"domain_name":true,"etag":true,"hosted_zone_id":true,"id":true,"in_progress_validation_batches":true,"last_modified_time":true,"logging_config":[],"ordered_cache_behavior":[],"origin":[{"custom_header":[],"custom_origin_config":[],"origin_shield":[],"s3_origin_config":[{"origin_access_identity":true}]}],"origin_group":[],"restrictions":[{"geo_restriction":[{"locations":true}]}],"status":true,"tags_all":true,"trusted_key_groups":true,"trusted_signers":true,"viewer_certificate":[{}]},"before_sensitive":false,"after_sensitive":{"aliases":[false],"custom_error_response":[{}],"default_cache_behavior":[{"allowed_methods":[false,false,false,false,false,false,false],"cached_methods":[false,false],"forwarded_values":[{"cookies":[{"whitelisted_names":[]}],"headers":[],"query_string_cache_keys":[]}],"function_association":[],"lambda_function_association":[],"trusted_key_groups":[],"trusted_signers":[]}],"logging_config":[],"ordered_cache_behavior":[],"origin":[{"custom_header":[],"custom_origin_config":[],"origin_shield":[],"s3_origin_config":[{}]}],"origin_group":[],"restrictions":[{"geo_restriction":[{"locations":[]}]}],"tags_all":{},"trusted_key_groups":[],"trusted_signers":[],"viewer_certificate":[{}]}}},{"address":"aws_cloudfront_origin_access_identity.example","mode":"managed","type":"aws_cloudfront_origin_access_identity","name":"example","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"comment":"Allow CloudFront to reach the S3 bucket for domain"},"after_unknown":{"caller_reference":true,"cloudfront_access_identity_path":true,"etag":true,"iam_arn":true,"id":true,"s3_canonical_user_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_cloudwatch_log_group.dada","mode":"managed","type":"aws_cloudwatch_log_group","name":"dada","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"kms_key_id":null,"name":"MyApp/access.log","retention_in_days":0,"skip_destroy":false,"tags":null},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"aws_cloudwatch_log_metric_filter.yada","mode":"managed","type":"aws_cloudwatch_log_metric_filter","name":"yada","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"log_group_name":"MyApp/access.log","metric_transformation":[{"default_value":null,"dimensions":null,"name":"EventCount","namespace":"YourNamespace","unit":"None","value":"1"}],"name":"MyAppAccessCount","pattern":"/\"levelname\": \"ERROR\"/"},"after_unknown":{"id":true,"metric_transformation":[{}]},"before_sensitive":false,"after_sensitive":{"metric_transformation":[{}]}}},{"address":"aws_ecs_cluster.ecs-cluster","mode":"managed","type":"aws_ecs_cluster","name":"ecs-cluster","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"configuration":[],"name":"ecs-cluster","service_connect_defaults":[],"tags":null},"after_unknown":{"arn":true,"configuration":[],"id":true,"service_connect_defaults":[],"setting":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"configuration":[],"service_connect_defaults":[],"setting":[],"tags_all":{}}}},{"address":"aws_ecs_service.main","mode":"managed","type":"aws_ecs_service","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"deployment_maximum_percent":200,"deployment_minimum_healthy_percent":100,"desired_count":1,"enable_ecs_managed_tags":false,"enable_execute_command":false,"force_new_deployment":null,"health_check_grace_period_seconds":null,"launch_type":"FARGATE","load_balancer":[],"name":"ecs-service-service","network_configuration":[{"assign_public_ip":false,"security_groups":null,"subnets":null}],"ordered_placement_strategy":[],"placement_constraints":[],"platform_version":"1.4.0","propagate_tags":"SERVICE","scheduling_strategy":"REPLICA","service_connect_configuration":[],"service_registries":[],"tags":null,"timeouts":null,"wait_for_steady_state":false},"after_unknown":{"alarms":[],"capacity_provider_strategy":[],"cluster":true,"deployment_circuit_breaker":[],"deployment_controller":[],"iam_role":true,"id":true,"load_balancer":[],"network_configuration":[{}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags_all":true,"task_definition":true,"triggers":true},"before_sensitive":false,"after_sensitive":{"alarms":[],"capacity_provider_strategy":[],"deployment_circuit_breaker":[],"deployment_controller":[],"load_balancer":[],"network_configuration":[{}],"ordered_placement_strategy":[],"placement_constraints":[],"service_connect_configuration":[],"service_registries":[],"tags_all":{},"triggers":{}}}},{"address":"aws_ecs_task_definition.ecs-service","mode":"managed","type":"aws_ecs_task_definition","name":"ecs-service","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"container_definitions":"[{\"image\":\"fooBar\",\"name\":\"foo bar\"}]","cpu":null,"ephemeral_storage":[],"family":"ecs-cluster","inference_accelerator":[],"ipc_mode":null,"memory":null,"network_mode":"awsvpc","pid_mode":null,"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":["FARGATE"],"runtime_platform":[],"skip_destroy":false,"tags":null,"task_role_arn":null,"volume":[]},"after_unknown":{"arn":true,"arn_without_revision":true,"ephemeral_storage":[],"execution_role_arn":true,"id":true,"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"revision":true,"runtime_platform":[],"tags_all":true,"volume":[]},"before_sensitive":false,"after_sensitive":{"ephemeral_storage":[],"inference_accelerator":[],"placement_constraints":[],"proxy_configuration":[],"requires_compatibilities":[false],"runtime_platform":[],"tags_all":{},"volume":[]}}},{"address":"aws_iam_policy.AssumeRole_passes","mode":"managed","type":"aws_iam_policy","name":"AssumeRole_passes","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Assume roles don't need a account condition","name":"AssumeRole_passes","path":"/","policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","tags":{"CostCentre":"tf-acc-test-iam-policy","Terraform":"test"},"tags_all":{"CostCentre":"tf-acc-test-iam-policy","Terraform":"test"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"policy_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_iam_policy.not_a_service_prinicpal_passes","mode":"managed","type":"aws_iam_policy","name":"not_a_service_prinicpal_passes","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Passes without a service principal","name":"not_a_service_prinicpal_passes","path":"/","policy":"{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"555555555555\",\"123456789012\"]}}],\"Version\":\"2012-10-17\"}","tags":{"CostCentre":"tf-acc-test-iam-policy","Terraform":"test"},"tags_all":{"CostCentre":"tf-acc-test-iam-policy","Terraform":"test"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"policy_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_iam_policy.s3_service_principal_fails","mode":"managed","type":"aws_iam_policy","name":"s3_service_principal_fails","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Fails without an account condition","name":"Service_principal_fails","path":"/","policy":"{\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"s3.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","tags":{"CostCentre":"tf-acc-test-iam-policy","Terraform":"test"},"tags_all":{"CostCentre":"tf-acc-test-iam-policy","Terraform":"test"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"policy_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_iam_policy.s3_service_principal_passes","mode":"managed","type":"aws_iam_policy","name":"s3_service_principal_passes","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Passes with an account condition","name":"Service_principal_passes","path":"/","policy":"{\"Statement\":[{\"Action\":\"kms:*\",\"Condition\":{\"StringLike\":{\"AWS:SourceAccount\":\"account\"}},\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"s3.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","tags":{"CostCentre":"tf-acc-test-iam-policy","Terraform":"test"},"tags_all":{"CostCentre":"tf-acc-test-iam-policy","Terraform":"test"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"policy_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_iam_role.ecs-service","mode":"managed","type":"aws_iam_role","name":"ecs-service","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ecs-tasks.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ecs-role","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"aws_iam_role.iam_for_lambda","mode":"managed","type":"aws_iam_role","name":"iam_for_lambda","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"iam_for_lambda","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"aws_iam_role.iam_for_lambda_with_eni","mode":"managed","type":"aws_iam_role","name":"iam_for_lambda_with_eni","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Sid\":\"\"}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"iam_for_lambda_with_eni","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"aws_iam_role_policy_attachment.lambda","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole","role":"iam_for_lambda_with_eni"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_lambda_function.test_lambda_with_bad_runtime","mode":"managed","type":"aws_lambda_function","name":"test_lambda_with_bad_runtime","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"code_signing_config_arn":null,"dead_letter_config":[],"description":null,"environment":[],"file_system_config":[],"filename":"mocks/test.zip","function_name":"test_lambda_with_bad_runtime","handler":"index.test","image_config":[],"image_uri":null,"kms_key_arn":null,"layers":null,"memory_size":128,"package_type":"Zip","publish":false,"replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"runtime":"nodejs12.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"skip_destroy":false,"snap_start":[],"source_code_hash":"55O3slT2emNC41dVY7jnD4xLKHt0tS8mpR1lV8vQHws=","tags":null,"timeout":3,"timeouts":null,"vpc_config":[]},"after_unknown":{"architectures":true,"arn":true,"dead_letter_config":[],"environment":[],"ephemeral_storage":true,"file_system_config":[],"id":true,"image_config":[],"invoke_arn":true,"last_modified":true,"qualified_arn":true,"qualified_invoke_arn":true,"role":true,"signing_job_arn":true,"signing_profile_version_arn":true,"snap_start":[],"source_code_size":true,"tags_all":true,"tracing_config":true,"version":true,"vpc_config":[]},"before_sensitive":false,"after_sensitive":{"architectures":[],"dead_letter_config":[],"environment":[],"ephemeral_storage":[],"file_system_config":[],"image_config":[],"snap_start":[],"tags_all":{},"tracing_config":[],"vpc_config":[]}}},{"address":"aws_lambda_function.test_lambda_with_good_runtime","mode":"managed","type":"aws_lambda_function","name":"test_lambda_with_good_runtime","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"code_signing_config_arn":null,"dead_letter_config":[],"description":null,"environment":[],"file_system_config":[],"filename":"mocks/test.zip","function_name":"test_lambda_with_good_runtime","handler":"index.test","image_config":[],"image_uri":null,"kms_key_arn":null,"layers":null,"memory_size":128,"package_type":"Zip","publish":false,"replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"runtime":"nodejs18.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"skip_destroy":false,"snap_start":[],"source_code_hash":"55O3slT2emNC41dVY7jnD4xLKHt0tS8mpR1lV8vQHws=","tags":null,"timeout":3,"timeouts":null,"vpc_config":[]},"after_unknown":{"architectures":true,"arn":true,"dead_letter_config":[],"environment":[],"ephemeral_storage":true,"file_system_config":[],"id":true,"image_config":[],"invoke_arn":true,"last_modified":true,"qualified_arn":true,"qualified_invoke_arn":true,"role":true,"signing_job_arn":true,"signing_profile_version_arn":true,"snap_start":[],"source_code_size":true,"tags_all":true,"tracing_config":true,"version":true,"vpc_config":[]},"before_sensitive":false,"after_sensitive":{"architectures":[],"dead_letter_config":[],"environment":[],"ephemeral_storage":[],"file_system_config":[],"image_config":[],"snap_start":[],"tags_all":{},"tracing_config":[],"vpc_config":[]}}},{"address":"aws_lambda_function.test_vpc_lambda_with_eni_policy","mode":"managed","type":"aws_lambda_function","name":"test_vpc_lambda_with_eni_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"code_signing_config_arn":null,"dead_letter_config":[],"description":null,"environment":[],"file_system_config":[],"filename":"mocks/test.zip","function_name":"test_vpc_lambda_with_eni_policy","handler":"index.test","image_config":[],"image_uri":null,"kms_key_arn":null,"layers":null,"memory_size":128,"package_type":"Zip","publish":false,"replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"runtime":"nodejs16.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"skip_destroy":false,"snap_start":[],"source_code_hash":"55O3slT2emNC41dVY7jnD4xLKHt0tS8mpR1lV8vQHws=","tags":null,"timeout":3,"timeouts":null,"vpc_config":[{"ipv6_allowed_for_dual_stack":false,"security_group_ids":null,"subnet_ids":null}]},"after_unknown":{"architectures":true,"arn":true,"dead_letter_config":[],"environment":[],"ephemeral_storage":true,"file_system_config":[],"id":true,"image_config":[],"invoke_arn":true,"last_modified":true,"qualified_arn":true,"qualified_invoke_arn":true,"role":true,"signing_job_arn":true,"signing_profile_version_arn":true,"snap_start":[],"source_code_size":true,"tags_all":true,"tracing_config":true,"version":true,"vpc_config":[{"vpc_id":true}]},"before_sensitive":false,"after_sensitive":{"architectures":[],"dead_letter_config":[],"environment":[],"ephemeral_storage":[],"file_system_config":[],"image_config":[],"snap_start":[],"tags_all":{},"tracing_config":[],"vpc_config":[{}]}}},{"address":"aws_lambda_function.test_vpc_lambda_with_missing_eni_policy","mode":"managed","type":"aws_lambda_function","name":"test_vpc_lambda_with_missing_eni_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"code_signing_config_arn":null,"dead_letter_config":[],"description":null,"environment":[],"file_system_config":[],"filename":"mocks/test.zip","function_name":"test_vpc_lambda_with_missing_eni_policy","handler":"index.test","image_config":[],"image_uri":null,"kms_key_arn":null,"layers":null,"memory_size":128,"package_type":"Zip","publish":false,"replace_security_groups_on_destroy":null,"replacement_security_group_ids":null,"reserved_concurrent_executions":-1,"runtime":"nodejs16.x","s3_bucket":null,"s3_key":null,"s3_object_version":null,"skip_destroy":false,"snap_start":[],"source_code_hash":"55O3slT2emNC41dVY7jnD4xLKHt0tS8mpR1lV8vQHws=","tags":null,"timeout":3,"timeouts":null,"vpc_config":[{"ipv6_allowed_for_dual_stack":false,"security_group_ids":null,"subnet_ids":null}]},"after_unknown":{"architectures":true,"arn":true,"dead_letter_config":[],"environment":[],"ephemeral_storage":true,"file_system_config":[],"id":true,"image_config":[],"invoke_arn":true,"last_modified":true,"qualified_arn":true,"qualified_invoke_arn":true,"role":true,"signing_job_arn":true,"signing_profile_version_arn":true,"snap_start":[],"source_code_size":true,"tags_all":true,"tracing_config":true,"version":true,"vpc_config":[{"vpc_id":true}]},"before_sensitive":false,"after_sensitive":{"architectures":[],"dead_letter_config":[],"environment":[],"ephemeral_storage":[],"file_system_config":[],"image_config":[],"snap_start":[],"tags_all":{},"tracing_config":[],"vpc_config":[{}]}}},{"address":"aws_security_group.bad_ports_for_protocol","mode":"managed","type":"aws_security_group","name":"bad_ports_for_protocol","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":443}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":443}],"name":"bad_ports_for_protocol","revoke_rules_on_delete":false,"tags":{"CostCentre":"tf-test-sg","Terraform":"test"},"tags_all":{"CostCentre":"tf-test-sg","Terraform":"test"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"aws_security_group.good_ports_for_protocol","mode":"managed","type":"aws_security_group","name":"good_ports_for_protocol","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"name":"good_ports_for_protocol","revoke_rules_on_delete":false,"tags":{"CostCentre":"tf-test-sg","Terraform":"test"},"tags_all":{"CostCentre":"tf-test-sg","Terraform":"test"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"aws_security_group.tcp_protocol","mode":"managed","type":"aws_security_group","name":"tcp_protocol","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"tcp_protocol","revoke_rules_on_delete":false,"tags":{"CostCentre":"tf-test-sg","Terraform":"test"},"tags_all":{"CostCentre":"tf-test-sg","Terraform":"test"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"aws_wafv2_web_acl.better_gandalf","mode":"managed","type":"aws_wafv2_web_acl","name":"better_gandalf","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"association_config":[],"captcha_config":[],"custom_response_body":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"description":"None shall pass","name":"blocker","rule":[{"action":[],"captcha_config":[],"name":"AWSManagedRulesKnownBadInputsRuleSet","override_action":[{"count":[],"none":[{}]}],"priority":1,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"name":"AWSManagedRulesKnownBadInputsRuleSet","rule_action_override":[],"scope_down_statement":[],"vendor_name":"AWS","version":""}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"AWSManagedRulesKnownBadInputsRuleSet","sampled_requests_enabled":true}]},{"action":[],"captcha_config":[],"name":"AWSManagedRulesLinuxRuleSet","override_action":[{"count":[],"none":[{}]}],"priority":2,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"name":"AWSManagedRulesLinuxRuleSet","rule_action_override":[],"scope_down_statement":[],"vendor_name":"AWS","version":""}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"AWSManagedRulesLinuxRuleSet","sampled_requests_enabled":true}]}],"scope":"CLOUDFRONT","tags":null,"token_domains":null,"visibility_config":[{"cloudwatch_metrics_enabled":false,"metric_name":"friendly-metric-name","sampled_requests_enabled":false}]},"after_unknown":{"arn":true,"association_config":[],"capacity":true,"captcha_config":[],"custom_response_body":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"id":true,"lock_token":true,"rule":[{"action":[],"captcha_config":[],"override_action":[{"count":[],"none":[{}]}],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"rule_action_override":[],"scope_down_statement":[]}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[],"captcha_config":[],"override_action":[{"count":[],"none":[{}]}],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"rule_action_override":[],"scope_down_statement":[]}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]}],"tags_all":true,"visibility_config":[{}]},"before_sensitive":false,"after_sensitive":{"association_config":[],"captcha_config":[],"custom_response_body":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"rule":[{"action":[],"captcha_config":[],"override_action":[{"count":[],"none":[{}]}],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"rule_action_override":[],"scope_down_statement":[]}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[],"captcha_config":[],"override_action":[{"count":[],"none":[{}]}],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"rule_action_override":[],"scope_down_statement":[]}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]}],"tags_all":{},"visibility_config":[{}]}}},{"address":"aws_wafv2_web_acl.gandalf","mode":"managed","type":"aws_wafv2_web_acl","name":"gandalf","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"association_config":[],"captcha_config":[],"custom_response_body":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"description":"None shall pass","name":"blocker","rule":[{"action":[],"captcha_config":[],"name":"AWSManagedRulesKnownBadInputsRuleSet","override_action":[{"count":[],"none":[{}]}],"priority":1,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"name":"AWSManagedRulesKnownBadInputsRuleSet","rule_action_override":[],"scope_down_statement":[],"vendor_name":"AWS","version":""}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"AWSManagedRulesKnownBadInputsRuleSet","sampled_requests_enabled":true}]},{"action":[],"captcha_config":[],"name":"AWSManagedRulesLinuxRuleSet","override_action":[{"count":[],"none":[{}]}],"priority":1,"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"name":"AWSManagedRulesLinuxRuleSet","rule_action_override":[],"scope_down_statement":[],"vendor_name":"AWS","version":""}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{"cloudwatch_metrics_enabled":true,"metric_name":"AWSManagedRulesLinuxRuleSet","sampled_requests_enabled":true}]}],"scope":"CLOUDFRONT","tags":null,"token_domains":null,"visibility_config":[{"cloudwatch_metrics_enabled":false,"metric_name":"friendly-metric-name","sampled_requests_enabled":false}]},"after_unknown":{"arn":true,"association_config":[],"capacity":true,"captcha_config":[],"custom_response_body":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"id":true,"lock_token":true,"rule":[{"action":[],"captcha_config":[],"override_action":[{"count":[],"none":[{}]}],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"rule_action_override":[],"scope_down_statement":[]}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[],"captcha_config":[],"override_action":[{"count":[],"none":[{}]}],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"rule_action_override":[],"scope_down_statement":[]}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]}],"tags_all":true,"visibility_config":[{}]},"before_sensitive":false,"after_sensitive":{"association_config":[],"captcha_config":[],"custom_response_body":[],"default_action":[{"allow":[{"custom_request_handling":[]}],"block":[]}],"rule":[{"action":[],"captcha_config":[],"override_action":[{"count":[],"none":[{}]}],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"rule_action_override":[],"scope_down_statement":[]}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]},{"action":[],"captcha_config":[],"override_action":[{"count":[],"none":[{}]}],"rule_label":[],"statement":[{"and_statement":[],"byte_match_statement":[],"geo_match_statement":[],"ip_set_reference_statement":[],"label_match_statement":[],"managed_rule_group_statement":[{"managed_rule_group_configs":[],"rule_action_override":[],"scope_down_statement":[]}],"not_statement":[],"or_statement":[],"rate_based_statement":[],"regex_match_statement":[],"regex_pattern_set_reference_statement":[],"rule_group_reference_statement":[],"size_constraint_statement":[],"sqli_match_statement":[],"xss_match_statement":[]}],"visibility_config":[{}]}],"tags_all":{},"visibility_config":[{}]}}},{"address":"module.rds.aws_cloudwatch_log_group.log_exports[\"postgresql\"]","module_address":"module.rds","mode":"managed","type":"aws_cloudwatch_log_group","name":"log_exports","index":"postgresql","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"kms_key_id":null,"name":"/aws/rds/cluster/test-rds-cluster/postgresql","retention_in_days":30,"skip_destroy":false,"tags":{"CostCentre":"cal","Name":"test-rds-cluster","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"test-rds-cluster","Terraform":"true"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.rds.aws_cloudwatch_log_group.proxy","module_address":"module.rds","mode":"managed","type":"aws_cloudwatch_log_group","name":"proxy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"kms_key_id":null,"name":"/aws/rds/proxy/test-rds-proxy","retention_in_days":14,"skip_destroy":false,"tags":{"CostCentre":"cal","Name":"test-rds_proxy_logs","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"test-rds_proxy_logs","Terraform":"true"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.rds.aws_db_proxy.proxy","module_address":"module.rds","mode":"managed","type":"aws_db_proxy","name":"proxy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auth":[{"auth_scheme":"SECRETS","description":"The database connection string","iam_auth":"DISABLED","username":null}],"debug_logging":false,"engine_family":"POSTGRESQL","idle_client_timeout":1800,"name":"test-rds-proxy","require_tls":true,"tags":{"CostCentre":"cal","Name":"test-rds-rds-proxy","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"test-rds-rds-proxy","Terraform":"true"},"timeouts":null},"after_unknown":{"arn":true,"auth":[{"client_password_auth_type":true,"secret_arn":true}],"endpoint":true,"id":true,"role_arn":true,"tags":{},"tags_all":{},"vpc_security_group_ids":true,"vpc_subnet_ids":true},"before_sensitive":false,"after_sensitive":{"auth":[{}],"tags":{},"tags_all":{},"vpc_security_group_ids":[],"vpc_subnet_ids":[]}}},{"address":"module.rds.aws_db_proxy_default_target_group.this","module_address":"module.rds","mode":"managed","type":"aws_db_proxy_default_target_group","name":"this","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"db_proxy_name":"test-rds-proxy","timeouts":null},"after_unknown":{"arn":true,"connection_pool_config":true,"id":true,"name":true},"before_sensitive":false,"after_sensitive":{"connection_pool_config":[]}}},{"address":"module.rds.aws_db_proxy_target.target","module_address":"module.rds","mode":"managed","type":"aws_db_proxy_target","name":"target","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"db_instance_identifier":null,"db_proxy_name":"test-rds-proxy"},"after_unknown":{"db_cluster_identifier":true,"endpoint":true,"id":true,"port":true,"rds_resource_id":true,"target_arn":true,"target_group_name":true,"tracked_cluster_id":true,"type":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.rds.aws_db_subnet_group.rds","module_address":"module.rds","mode":"managed","type":"aws_db_subnet_group","name":"rds","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Managed by Terraform","name":"test-rds-subnet-group","tags":{"CostCentre":"cal","Name":"test-rds-subnet-group","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"test-rds-subnet-group","Terraform":"true"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"subnet_ids":true,"supported_network_types":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"subnet_ids":[],"supported_network_types":[],"tags":{},"tags_all":{}}}},{"address":"module.rds.aws_iam_policy.read_connection_string","module_address":"module.rds","mode":"managed","type":"aws_iam_policy","name":"read_connection_string","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"name":"test-rdsReadConnectionString","path":"/","tags":{"CostCentre":"cal","Terraform":"true"},"tags_all":{"CostCentre":"cal","Terraform":"true"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"policy":true,"policy_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.rds.aws_iam_role.rds_proxy","module_address":"module.rds","mode":"managed","type":"aws_iam_role","name":"rds_proxy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"rds.amazonaws.com\"},\"Sid\":\"RDSAssume\"}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"test-rds_rds_proxy","path":"/","permissions_boundary":null,"tags":{"CostCentre":"cal","Terraform":"true"},"tags_all":{"CostCentre":"cal","Terraform":"true"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}}},{"address":"module.rds.aws_iam_role_policy_attachment.read_connection_string","module_address":"module.rds","mode":"managed","type":"aws_iam_role_policy_attachment","name":"read_connection_string","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"role":"test-rds_rds_proxy"},"after_unknown":{"id":true,"policy_arn":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.rds.aws_rds_cluster.cluster","module_address":"module.rds","mode":"managed","type":"aws_rds_cluster","name":"cluster","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allow_major_version_upgrade":false,"apply_immediately":false,"backtrack_window":0,"backup_retention_period":7,"cluster_identifier":"test-rds-cluster","copy_tags_to_snapshot":true,"database_name":"foo","db_cluster_instance_class":null,"db_instance_parameter_group_name":null,"db_subnet_group_name":"test-rds-subnet-group","deletion_protection":true,"enable_global_write_forwarding":false,"enable_http_endpoint":false,"enabled_cloudwatch_logs_exports":["postgresql"],"engine":"aurora-postgresql","engine_mode":"provisioned","engine_version":"13.3","global_cluster_identifier":null,"iam_database_authentication_enabled":null,"iops":null,"manage_master_user_password":null,"master_password":"foo","master_username":"calvin","preferred_backup_window":"07:00-09:00","preferred_maintenance_window":"sun:06:00-sun:07:00","replication_source_identifier":null,"restore_to_point_in_time":[],"s3_import":[],"scaling_configuration":[],"serverlessv2_scaling_configuration":[],"skip_final_snapshot":false,"snapshot_identifier":null,"source_region":null,"storage_encrypted":true,"tags":{"CostCentre":"cal","Name":"test-rds-cluster","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"test-rds-cluster","Terraform":"true"},"timeouts":null},"after_unknown":{"allocated_storage":true,"arn":true,"availability_zones":true,"cluster_identifier_prefix":true,"cluster_members":true,"cluster_resource_id":true,"db_cluster_parameter_group_name":true,"db_system_id":true,"enabled_cloudwatch_logs_exports":[false],"endpoint":true,"engine_version_actual":true,"final_snapshot_identifier":true,"hosted_zone_id":true,"iam_roles":true,"id":true,"kms_key_id":true,"master_user_secret":true,"master_user_secret_kms_key_id":true,"network_type":true,"port":true,"reader_endpoint":true,"restore_to_point_in_time":[],"s3_import":[],"scaling_configuration":[],"serverlessv2_scaling_configuration":[],"storage_type":true,"tags":{},"tags_all":{},"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"availability_zones":[],"cluster_members":[],"enabled_cloudwatch_logs_exports":[false],"iam_roles":[],"master_password":true,"master_user_secret":[],"restore_to_point_in_time":[],"s3_import":[],"scaling_configuration":[],"serverlessv2_scaling_configuration":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}}},{"address":"module.rds.aws_rds_cluster_instance.instances[0]","module_address":"module.rds","mode":"managed","type":"aws_rds_cluster_instance","name":"instances","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_minor_version_upgrade":true,"copy_tags_to_snapshot":false,"custom_iam_instance_profile":null,"db_subnet_group_name":"test-rds-subnet-group","engine":"aurora-postgresql","engine_version":"13.3","identifier":"test-rds-instance-0","instance_class":"db.t3.medium","monitoring_interval":0,"performance_insights_enabled":true,"promotion_tier":0,"publicly_accessible":false,"tags":{"CostCentre":"cal","Name":"test-rds-instance-0","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"test-rds-instance-0","Terraform":"true"},"timeouts":null},"after_unknown":{"apply_immediately":true,"arn":true,"availability_zone":true,"ca_cert_identifier":true,"cluster_identifier":true,"db_parameter_group_name":true,"dbi_resource_id":true,"endpoint":true,"engine_version_actual":true,"id":true,"identifier_prefix":true,"kms_key_id":true,"monitoring_role_arn":true,"network_type":true,"performance_insights_kms_key_id":true,"performance_insights_retention_period":true,"port":true,"preferred_backup_window":true,"preferred_maintenance_window":true,"storage_encrypted":true,"tags":{},"tags_all":{},"writer":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.rds.aws_rds_cluster_instance.instances[1]","module_address":"module.rds","mode":"managed","type":"aws_rds_cluster_instance","name":"instances","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_minor_version_upgrade":true,"copy_tags_to_snapshot":false,"custom_iam_instance_profile":null,"db_subnet_group_name":"test-rds-subnet-group","engine":"aurora-postgresql","engine_version":"13.3","identifier":"test-rds-instance-1","instance_class":"db.t3.medium","monitoring_interval":0,"performance_insights_enabled":true,"promotion_tier":0,"publicly_accessible":false,"tags":{"CostCentre":"cal","Name":"test-rds-instance-1","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"test-rds-instance-1","Terraform":"true"},"timeouts":null},"after_unknown":{"apply_immediately":true,"arn":true,"availability_zone":true,"ca_cert_identifier":true,"cluster_identifier":true,"db_parameter_group_name":true,"dbi_resource_id":true,"endpoint":true,"engine_version_actual":true,"id":true,"identifier_prefix":true,"kms_key_id":true,"monitoring_role_arn":true,"network_type":true,"performance_insights_kms_key_id":true,"performance_insights_retention_period":true,"port":true,"preferred_backup_window":true,"preferred_maintenance_window":true,"storage_encrypted":true,"tags":{},"tags_all":{},"writer":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.rds.aws_rds_cluster_instance.instances[2]","module_address":"module.rds","mode":"managed","type":"aws_rds_cluster_instance","name":"instances","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_minor_version_upgrade":true,"copy_tags_to_snapshot":false,"custom_iam_instance_profile":null,"db_subnet_group_name":"test-rds-subnet-group","engine":"aurora-postgresql","engine_version":"13.3","identifier":"test-rds-instance-2","instance_class":"db.t3.medium","monitoring_interval":0,"performance_insights_enabled":true,"promotion_tier":0,"publicly_accessible":false,"tags":{"CostCentre":"cal","Name":"test-rds-instance-2","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"test-rds-instance-2","Terraform":"true"},"timeouts":null},"after_unknown":{"apply_immediately":true,"arn":true,"availability_zone":true,"ca_cert_identifier":true,"cluster_identifier":true,"db_parameter_group_name":true,"dbi_resource_id":true,"endpoint":true,"engine_version_actual":true,"id":true,"identifier_prefix":true,"kms_key_id":true,"monitoring_role_arn":true,"network_type":true,"performance_insights_kms_key_id":true,"performance_insights_retention_period":true,"port":true,"preferred_backup_window":true,"preferred_maintenance_window":true,"storage_encrypted":true,"tags":{},"tags_all":{},"writer":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.rds.aws_secretsmanager_secret.connection_string","module_address":"module.rds","mode":"managed","type":"aws_secretsmanager_secret","name":"connection_string","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"force_overwrite_replica_secret":false,"kms_key_id":null,"recovery_window_in_days":30,"tags":{"CostCentre":"cal","Terraform":"true"},"tags_all":{"CostCentre":"cal","Terraform":"true"}},"after_unknown":{"arn":true,"id":true,"name":true,"name_prefix":true,"policy":true,"replica":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"replica":[],"tags":{},"tags_all":{}}}},{"address":"module.rds.aws_secretsmanager_secret.proxy_connection_string","module_address":"module.rds","mode":"managed","type":"aws_secretsmanager_secret","name":"proxy_connection_string","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"force_overwrite_replica_secret":false,"kms_key_id":null,"recovery_window_in_days":30,"tags":{"CostCentre":"cal","Terraform":"true"},"tags_all":{"CostCentre":"cal","Terraform":"true"}},"after_unknown":{"arn":true,"id":true,"name":true,"name_prefix":true,"policy":true,"replica":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"replica":[],"tags":{},"tags_all":{}}}},{"address":"module.rds.aws_secretsmanager_secret_version.connection_string","module_address":"module.rds","mode":"managed","type":"aws_secretsmanager_secret_version","name":"connection_string","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"secret_binary":null,"secret_string":"{\"password\":\"foo\",\"username\":\"calvin\"}"},"after_unknown":{"arn":true,"id":true,"secret_id":true,"version_id":true,"version_stages":true},"before_sensitive":false,"after_sensitive":{"secret_binary":true,"secret_string":true,"version_stages":[]}}},{"address":"module.rds.aws_secretsmanager_secret_version.proxy_connection_string","module_address":"module.rds","mode":"managed","type":"aws_secretsmanager_secret_version","name":"proxy_connection_string","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"secret_binary":null},"after_unknown":{"arn":true,"id":true,"secret_id":true,"secret_string":true,"version_id":true,"version_stages":true},"before_sensitive":false,"after_sensitive":{"secret_binary":true,"secret_string":true,"version_stages":[]}}},{"address":"module.rds.aws_security_group.rds_proxy","module_address":"module.rds","mode":"managed","type":"aws_security_group","name":"rds_proxy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"The Security group that allows communication between the proxy and the database","egress":[{"cidr_blocks":[],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":true,"to_port":5432}],"ingress":[{"cidr_blocks":[],"description":"","from_port":5432,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":true,"to_port":5432}],"name":"test-rds_rds_proxy_sg","revoke_rules_on_delete":false,"tags":{"CostCentre":"cal","Name":"test-rds_rds_proxy_sg","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"test-rds_rds_proxy_sg","Terraform":"true"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.rds.data.aws_iam_policy_document.read_connection_string","module_address":"module.rds","mode":"data","type":"aws_iam_policy_document","name":"read_connection_string","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"override_policy_documents":null,"policy_id":null,"source_policy_documents":null,"statement":[{"actions":["secretsmanager:DescribeSecret","secretsmanager:GetResourcePolicy","secretsmanager:GetSecretValue","secretsmanager:ListSecretVersionIds"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":[],"sid":"0"},{"actions":["secretsmanager:ListSecrets"],"condition":[],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":"1"},{"actions":["kms:Decrypt"],"condition":[{"test":"StringEquals","values":["secretsmanager.ca-central-1.amazonaws.com"],"variable":"kms:ViaService"}],"effect":"Allow","not_actions":null,"not_principals":[],"not_resources":null,"principals":[],"resources":["*"],"sid":"2"}],"version":null},"after_unknown":{"id":true,"json":true,"statement":[{"actions":[false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[true]},{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false],"condition":[{"values":[false]}],"not_principals":[],"principals":[],"resources":[false]}]},"before_sensitive":false,"after_sensitive":{"statement":[{"actions":[false,false,false,false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false],"condition":[],"not_principals":[],"principals":[],"resources":[false]},{"actions":[false],"condition":[{"values":[false]}],"not_principals":[],"principals":[],"resources":[false]}]}}},{"address":"module.rds.random_string.random","module_address":"module.rds","mode":"managed","type":"random_string","name":"random","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"length":6,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":false,"upper":false},"after_unknown":{"id":true,"result":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_default_network_acl.default","module_address":"module.vpc","mode":"managed","type":"aws_default_network_acl","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"egress":[],"ingress":[],"subnet_ids":null,"tags":{"CostCentre":"cal","Name":"vpc_default_nacl","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc_default_nacl","Terraform":"true"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"egress":[],"id":true,"ingress":[],"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_default_route_table.default","module_address":"module.vpc","mode":"managed","type":"aws_default_route_table","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"propagating_vgws":null,"route":[],"tags":{"CostCentre":"cal","Terraform":"true","name":"vpc_default_route_table"},"tags_all":{"CostCentre":"cal","Terraform":"true","name":"vpc_default_route_table"},"timeouts":null},"after_unknown":{"arn":true,"default_route_table_id":true,"id":true,"owner_id":true,"route":[],"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"route":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_default_security_group.default","module_address":"module.vpc","mode":"managed","type":"aws_default_security_group","name":"default","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"revoke_rules_on_delete":false,"tags":{"CostCentre":"cal","Name":"vpc_default_sg","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc_default_sg","Terraform":"true"}},"after_unknown":{"arn":true,"description":true,"egress":true,"id":true,"ingress":true,"name":true,"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_internet_gateway.gw","module_address":"module.vpc","mode":"managed","type":"aws_internet_gateway","name":"gw","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"CostCentre":"cal","Name":"vpc_internet_gateway","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc_internet_gateway","Terraform":"true"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_nat_gateway.nat_gw[0]","module_address":"module.vpc","mode":"managed","type":"aws_nat_gateway","name":"nat_gw","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allocation_id":"","connectivity_type":"private","secondary_allocation_ids":null,"tags":{"CostCentre":"cal","Name":"vpc-natgw-0","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc-natgw-0","Terraform":"true"},"timeouts":null},"after_unknown":{"association_id":true,"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"secondary_private_ip_address_count":true,"secondary_private_ip_addresses":true,"subnet_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_nat_gateway.nat_gw[1]","module_address":"module.vpc","mode":"managed","type":"aws_nat_gateway","name":"nat_gw","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allocation_id":"","connectivity_type":"private","secondary_allocation_ids":null,"tags":{"CostCentre":"cal","Name":"vpc-natgw-1","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc-natgw-1","Terraform":"true"},"timeouts":null},"after_unknown":{"association_id":true,"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"secondary_private_ip_address_count":true,"secondary_private_ip_addresses":true,"subnet_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_nat_gateway.nat_gw[2]","module_address":"module.vpc","mode":"managed","type":"aws_nat_gateway","name":"nat_gw","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allocation_id":"","connectivity_type":"private","secondary_allocation_ids":null,"tags":{"CostCentre":"cal","Name":"vpc-natgw-2","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc-natgw-2","Terraform":"true"},"timeouts":null},"after_unknown":{"association_id":true,"id":true,"network_interface_id":true,"private_ip":true,"public_ip":true,"secondary_private_ip_address_count":true,"secondary_private_ip_addresses":true,"subnet_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"secondary_private_ip_addresses":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_network_acl.main","module_address":"module.vpc","mode":"managed","type":"aws_network_acl","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"CostCentre":"cal","Name":"vpc_main_nacl","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc_main_nacl","Terraform":"true"}},"after_unknown":{"arn":true,"egress":true,"id":true,"ingress":true,"owner_id":true,"subnet_ids":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[],"ingress":[],"subnet_ids":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_network_acl_rule.block_rdp[0]","module_address":"module.vpc","mode":"managed","type":"aws_network_acl_rule","name":"block_rdp","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_block":"0.0.0.0/0","egress":false,"from_port":3389,"icmp_code":null,"icmp_type":null,"ipv6_cidr_block":null,"protocol":"tcp","rule_action":"deny","rule_number":51,"to_port":3389},"after_unknown":{"id":true,"network_acl_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_network_acl_rule.block_ssh[0]","module_address":"module.vpc","mode":"managed","type":"aws_network_acl_rule","name":"block_ssh","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"cidr_block":"0.0.0.0/0","egress":false,"from_port":22,"icmp_code":null,"icmp_type":null,"ipv6_cidr_block":null,"protocol":"tcp","rule_action":"deny","rule_number":50,"to_port":22},"after_unknown":{"id":true,"network_acl_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route.private_nat_gateway[0]","module_address":"module.vpc","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"id":true,"instance_id":true,"instance_owner_id":true,"nat_gateway_id":true,"network_interface_id":true,"origin":true,"route_table_id":true,"state":true,"timeouts":{}},"before_sensitive":false,"after_sensitive":{"timeouts":{}}}},{"address":"module.vpc.aws_route.private_nat_gateway[1]","module_address":"module.vpc","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"id":true,"instance_id":true,"instance_owner_id":true,"nat_gateway_id":true,"network_interface_id":true,"origin":true,"route_table_id":true,"state":true,"timeouts":{}},"before_sensitive":false,"after_sensitive":{"timeouts":{}}}},{"address":"module.vpc.aws_route.private_nat_gateway[2]","module_address":"module.vpc","mode":"managed","type":"aws_route","name":"private_nat_gateway","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"id":true,"instance_id":true,"instance_owner_id":true,"nat_gateway_id":true,"network_interface_id":true,"origin":true,"route_table_id":true,"state":true,"timeouts":{}},"before_sensitive":false,"after_sensitive":{"timeouts":{}}}},{"address":"module.vpc.aws_route.public_internet_gateway","module_address":"module.vpc","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"local_gateway_id":null,"nat_gateway_id":null,"timeouts":{"create":"5m","delete":null,"update":null},"transit_gateway_id":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"gateway_id":true,"id":true,"instance_id":true,"instance_owner_id":true,"network_interface_id":true,"origin":true,"route_table_id":true,"state":true,"timeouts":{}},"before_sensitive":false,"after_sensitive":{"timeouts":{}}}},{"address":"module.vpc.aws_route_table.private[0]","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"CostCentre":"cal","Name":"vpc_private_route_table_0","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc_private_route_table_0","Terraform":"true"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table.private[1]","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"CostCentre":"cal","Name":"vpc_private_route_table_1","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc_private_route_table_1","Terraform":"true"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table.private[2]","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"private","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"CostCentre":"cal","Name":"vpc_private_route_table_2","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc_private_route_table_2","Terraform":"true"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table.public","module_address":"module.vpc","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"CostCentre":"cal","Name":"vpc_public_route_table","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc_public_route_table","Terraform":"true"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[],"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_route_table_association.private[0]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route_table_association.private[1]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route_table_association.private[2]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"private","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route_table_association.public[0]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route_table_association.public[1]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_route_table_association.public[2]","module_address":"module.vpc","mode":"managed","type":"aws_route_table_association","name":"public","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpc.aws_subnet.private[0]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ca-central-1a","cidr_block":"10.0.0.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"CostCentre":"cal","Name":"vpc_private_subnet_ca-central-1a","Terraform":"true","Tier":"Private"},"tags_all":{"CostCentre":"cal","Name":"vpc_private_subnet_ca-central-1a","Terraform":"true","Tier":"Private"},"timeouts":{"create":null,"delete":"40m"}},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"timeouts":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{},"timeouts":{}}}},{"address":"module.vpc.aws_subnet.private[1]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ca-central-1b","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"CostCentre":"cal","Name":"vpc_private_subnet_ca-central-1b","Terraform":"true","Tier":"Private"},"tags_all":{"CostCentre":"cal","Name":"vpc_private_subnet_ca-central-1b","Terraform":"true","Tier":"Private"},"timeouts":{"create":null,"delete":"40m"}},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"timeouts":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{},"timeouts":{}}}},{"address":"module.vpc.aws_subnet.private[2]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"private","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ca-central-1d","cidr_block":"10.0.2.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"CostCentre":"cal","Name":"vpc_private_subnet_ca-central-1d","Terraform":"true","Tier":"Private"},"tags_all":{"CostCentre":"cal","Name":"vpc_private_subnet_ca-central-1d","Terraform":"true","Tier":"Private"},"timeouts":{"create":null,"delete":"40m"}},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"timeouts":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{},"timeouts":{}}}},{"address":"module.vpc.aws_subnet.public[0]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ca-central-1a","cidr_block":"10.0.3.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"CostCentre":"cal","Name":"vpc_public_subnet_ca-central-1a","Terraform":"true","Tier":"Public"},"tags_all":{"CostCentre":"cal","Name":"vpc_public_subnet_ca-central-1a","Terraform":"true","Tier":"Public"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.public[1]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ca-central-1b","cidr_block":"10.0.4.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"CostCentre":"cal","Name":"vpc_public_subnet_ca-central-1b","Terraform":"true","Tier":"Public"},"tags_all":{"CostCentre":"cal","Name":"vpc_public_subnet_ca-central-1b","Terraform":"true","Tier":"Public"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_subnet.public[2]","module_address":"module.vpc","mode":"managed","type":"aws_subnet","name":"public","index":2,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"ca-central-1d","cidr_block":"10.0.5.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"CostCentre":"cal","Name":"vpc_public_subnet_ca-central-1d","Terraform":"true","Tier":"Public"},"tags_all":{"CostCentre":"cal","Name":"vpc_public_subnet_ca-central-1d","Terraform":"true","Tier":"Public"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc.aws_vpc.main","module_address":"module.vpc","mode":"managed","type":"aws_vpc","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.0.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"CostCentre":"cal","Name":"vpc_vpc","Terraform":"true"},"tags_all":{"CostCentre":"cal","Name":"vpc_vpc","Terraform":"true"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_network_address_usage_metrics":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_network_border_group":true,"main_route_table_id":true,"owner_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}}],"prior_state":{"format_version":"0.2","terraform_version":"1.0.6","values":{"root_module":{"resources":[{"address":"data.aws_iam_policy_document.ecs-service","mode":"data","type":"aws_iam_policy_document","name":"ecs-service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"1077804475","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ecs-tasks.amazonaws.com\"\n      }\n    }\n  ]\n}","override_policy_documents":null,"policy_id":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["ecs-tasks.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}},{"address":"data.aws_iam_policy_document.lambda_service_principal","mode":"data","type":"aws_iam_policy_document","name":"lambda_service_principal","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"2690255455","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      }\n    }\n  ]\n}","override_policy_documents":null,"policy_id":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["lambda.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}},{"address":"data.aws_iam_policy_document.not_a_service_prinicpal","mode":"data","type":"aws_iam_policy_document","name":"not_a_service_prinicpal","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"2710828942","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:*\",\n      \"Principal\": {\n        \"AWS\": [\n          \"555555555555\",\n          \"123456789012\"\n        ]\n      }\n    }\n  ]\n}","override_policy_documents":null,"policy_id":null,"source_policy_documents":null,"statement":[{"actions":["kms:*"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["123456789012","555555555555"],"type":"AWS"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false,false]}],"resources":[]}]}},{"address":"data.aws_iam_policy_document.s3_service_principal","mode":"data","type":"aws_iam_policy_document","name":"s3_service_principal","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"2994048199","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:*\",\n      \"Principal\": {\n        \"Service\": \"s3.amazonaws.com\"\n      }\n    }\n  ]\n}","override_policy_documents":null,"policy_id":null,"source_policy_documents":null,"statement":[{"actions":["kms:*"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["s3.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}},{"address":"data.aws_iam_policy_document.s3_service_principal_with_account","mode":"data","type":"aws_iam_policy_document","name":"s3_service_principal_with_account","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"2868603348","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:*\",\n      \"Principal\": {\n        \"Service\": \"s3.amazonaws.com\"\n      },\n      \"Condition\": {\n        \"StringLike\": {\n          \"AWS:SourceAccount\": \"account\"\n        }\n      }\n    }\n  ]\n}","override_policy_documents":null,"policy_id":null,"source_policy_documents":null,"statement":[{"actions":["kms:*"],"condition":[{"test":"StringLike","values":["account"],"variable":"AWS:SourceAccount"}],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["s3.amazonaws.com"],"type":"Service"}],"resources":[],"sid":""}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[{"values":[false]}],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}},{"address":"data.template_file.ecs-service","mode":"data","type":"template_file","name":"ecs-service","provider_name":"registry.terraform.io/hashicorp/template","schema_version":0,"values":{"filename":null,"id":"8cdd4a7a396acd492541ae1e16006bd5e50ef5e3b89a729bcaf0ffe367f67711","rendered":"[\n    {\n        \"image\": \"fooBar\",\n        \"name\": \"foo bar\"\n    }\n]","template":"[\n    {\n        \"image\": \"${image}\",\n        \"name\": \"foo bar\"\n    }\n]","vars":{"image":"fooBar"}},"sensitive_values":{"vars":{}}}],"child_modules":[{"resources":[{"address":"module.rds.data.aws_iam_policy_document.assume_role","mode":"data","type":"aws_iam_policy_document","name":"assume_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"1301495841","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"RDSAssume\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"rds.amazonaws.com\"\n      }\n    }\n  ]\n}","override_policy_documents":null,"policy_id":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["rds.amazonaws.com"],"type":"Service"}],"resources":[],"sid":"RDSAssume"}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}}],"address":"module.rds"},{"resources":[{"address":"module.vpc.data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"all_availability_zones":null,"exclude_names":null,"exclude_zone_ids":null,"filter":null,"group_names":["ca-central-1"],"id":"ca-central-1","names":["ca-central-1a","ca-central-1b","ca-central-1d"],"state":"available","timeouts":null,"zone_ids":["cac1-az1","cac1-az2","cac1-az4"]},"sensitive_values":{"group_names":[false],"names":[false,false,false],"zone_ids":[false,false,false]}}],"address":"module.vpc"}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","version_constraint":"~\u003e 5.25.0","expressions":{"region":{"constant_value":"ca-central-1"}}}},"root_module":{"resources":[{"address":"aws_api_gateway_integration.MyDemoIntegration","mode":"managed","type":"aws_api_gateway_integration","name":"MyDemoIntegration","provider_config_key":"aws","expressions":{"cache_key_parameters":{"constant_value":["method.request.path.param"]},"cache_namespace":{"constant_value":"foobar"},"http_method":{"references":["aws_api_gateway_method.MyDemoMethod.http_method","aws_api_gateway_method.MyDemoMethod"]},"request_parameters":{"constant_value":{"integration.request.header.X-Authorization":"'static'"}},"resource_id":{"references":["aws_api_gateway_resource.MyDemoResource.id","aws_api_gateway_resource.MyDemoResource"]},"rest_api_id":{"references":["aws_api_gateway_rest_api.MyDemoAPI.id","aws_api_gateway_rest_api.MyDemoAPI"]},"timeout_milliseconds":{"constant_value":29000},"type":{"constant_value":"AWS_PROXY"}},"schema_version":0},{"address":"aws_api_gateway_method.MyDemoMethod","mode":"managed","type":"aws_api_gateway_method","name":"MyDemoMethod","provider_config_key":"aws","expressions":{"authorization":{"constant_value":"NONE"},"http_method":{"constant_value":"GET"},"resource_id":{"references":["aws_api_gateway_resource.MyDemoResource.id","aws_api_gateway_resource.MyDemoResource"]},"rest_api_id":{"references":["aws_api_gateway_rest_api.MyDemoAPI.id","aws_api_gateway_rest_api.MyDemoAPI"]}},"schema_version":0},{"address":"aws_api_gateway_resource.MyDemoResource","mode":"managed","type":"aws_api_gateway_resource","name":"MyDemoResource","provider_config_key":"aws","expressions":{"parent_id":{"references":["aws_api_gateway_rest_api.MyDemoAPI.root_resource_id","aws_api_gateway_rest_api.MyDemoAPI"]},"path_part":{"constant_value":"mydemoresource"},"rest_api_id":{"references":["aws_api_gateway_rest_api.MyDemoAPI.id","aws_api_gateway_rest_api.MyDemoAPI"]}},"schema_version":0},{"address":"aws_api_gateway_rest_api.MyDemoAPI","mode":"managed","type":"aws_api_gateway_rest_api","name":"MyDemoAPI","provider_config_key":"aws","expressions":{"description":{"constant_value":"This is my API for demonstration purposes"},"name":{"constant_value":"MyDemoAPI"}},"schema_version":0},{"address":"aws_cloudfront_distribution.example","mode":"managed","type":"aws_cloudfront_distribution","name":"example","provider_config_key":"aws","expressions":{"aliases":{"constant_value":["domain_name_source"]},"default_cache_behavior":[{"allowed_methods":{"constant_value":["DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT"]},"cached_methods":{"constant_value":["GET","HEAD"]},"compress":{"constant_value":true},"default_ttl":{"constant_value":86400},"forwarded_values":[{"cookies":[{"forward":{"constant_value":"none"}}],"query_string":{"constant_value":false}}],"max_ttl":{"constant_value":86400},"min_ttl":{"constant_value":0},"target_origin_id":{"constant_value":"example"},"viewer_protocol_policy":{"constant_value":"redirect-to-https"}}],"default_root_object":{"constant_value":"index.html"},"enabled":{"constant_value":true},"http_version":{"constant_value":"http2"},"origin":[{"domain_name":{"constant_value":"domain_name"},"origin_id":{"constant_value":"example"},"s3_origin_config":[{"origin_access_identity":{"references":["aws_cloudfront_origin_access_identity.example.cloudfront_access_identity_path","aws_cloudfront_origin_access_identity.example"]}}]}],"price_class":{"constant_value":"PriceClass_100"},"restrictions":[{"geo_restriction":[{"restriction_type":{"constant_value":"none"}}]}],"viewer_certificate":[{"acm_certificate_arn":{"constant_value":"arn:aws:acm:us-east-1:000000000000:certificate/8d0fab65-ddc4-4aa2-b1b1-ac56255e3257"},"minimum_protocol_version":{"constant_value":"TLSv1.2_2021"},"ssl_support_method":{"constant_value":"sni-only"}}]},"schema_version":1},{"address":"aws_cloudfront_origin_access_identity.example","mode":"managed","type":"aws_cloudfront_origin_access_identity","name":"example","provider_config_key":"aws","expressions":{"comment":{"constant_value":"Allow CloudFront to reach the S3 bucket for domain"}},"schema_version":0},{"address":"aws_cloudwatch_log_group.dada","mode":"managed","type":"aws_cloudwatch_log_group","name":"dada","provider_config_key":"aws","expressions":{"name":{"constant_value":"MyApp/access.log"}},"schema_version":0},{"address":"aws_cloudwatch_log_metric_filter.yada","mode":"managed","type":"aws_cloudwatch_log_metric_filter","name":"yada","provider_config_key":"aws","expressions":{"log_group_name":{"references":["aws_cloudwatch_log_group.dada.name","aws_cloudwatch_log_group.dada"]},"metric_transformation":[{"name":{"constant_value":"EventCount"},"namespace":{"constant_value":"YourNamespace"},"value":{"constant_value":"1"}}],"name":{"constant_value":"MyAppAccessCount"},"pattern":{"constant_value":"/\"levelname\": \"ERROR\"/"}},"schema_version":0},{"address":"aws_ecs_cluster.ecs-cluster","mode":"managed","type":"aws_ecs_cluster","name":"ecs-cluster","provider_config_key":"aws","expressions":{"name":{"constant_value":"ecs-cluster"}},"schema_version":0},{"address":"aws_ecs_service.main","mode":"managed","type":"aws_ecs_service","name":"main","provider_config_key":"aws","expressions":{"cluster":{"references":["aws_ecs_cluster.ecs-cluster.id","aws_ecs_cluster.ecs-cluster"]},"desired_count":{"constant_value":1},"launch_type":{"constant_value":"FARGATE"},"name":{"constant_value":"ecs-service-service"},"network_configuration":[{"assign_public_ip":{"constant_value":false},"subnets":{"constant_value":[]}}],"platform_version":{"constant_value":"1.4.0"},"propagate_tags":{"constant_value":"SERVICE"},"task_definition":{"references":["aws_ecs_task_definition.ecs-service.arn","aws_ecs_task_definition.ecs-service"]}},"schema_version":0},{"address":"aws_ecs_task_definition.ecs-service","mode":"managed","type":"aws_ecs_task_definition","name":"ecs-service","provider_config_key":"aws","expressions":{"container_definitions":{"references":["data.template_file.ecs-service.rendered","data.template_file.ecs-service"]},"execution_role_arn":{"references":["aws_iam_role.ecs-service.arn","aws_iam_role.ecs-service"]},"family":{"constant_value":"ecs-cluster"},"network_mode":{"constant_value":"awsvpc"},"requires_compatibilities":{"constant_value":["FARGATE"]}},"schema_version":1},{"address":"aws_iam_policy.AssumeRole_passes","mode":"managed","type":"aws_iam_policy","name":"AssumeRole_passes","provider_config_key":"aws","expressions":{"description":{"constant_value":"Assume roles don't need a account condition"},"name":{"constant_value":"AssumeRole_passes"},"path":{"constant_value":"/"},"policy":{"references":["data.aws_iam_policy_document.lambda_service_principal.json","data.aws_iam_policy_document.lambda_service_principal"]},"tags":{"constant_value":{"CostCentre":"tf-acc-test-iam-policy","Terraform":"test"}}},"schema_version":0},{"address":"aws_iam_policy.not_a_service_prinicpal_passes","mode":"managed","type":"aws_iam_policy","name":"not_a_service_prinicpal_passes","provider_config_key":"aws","expressions":{"description":{"constant_value":"Passes without a service principal"},"name":{"constant_value":"not_a_service_prinicpal_passes"},"path":{"constant_value":"/"},"policy":{"references":["data.aws_iam_policy_document.not_a_service_prinicpal.json","data.aws_iam_policy_document.not_a_service_prinicpal"]},"tags":{"constant_value":{"CostCentre":"tf-acc-test-iam-policy","Terraform":"test"}}},"schema_version":0},{"address":"aws_iam_policy.s3_service_principal_fails","mode":"managed","type":"aws_iam_policy","name":"s3_service_principal_fails","provider_config_key":"aws","expressions":{"description":{"constant_value":"Fails without an account condition"},"name":{"constant_value":"Service_principal_fails"},"path":{"constant_value":"/"},"policy":{"references":["data.aws_iam_policy_document.s3_service_principal.json","data.aws_iam_policy_document.s3_service_principal"]},"tags":{"constant_value":{"CostCentre":"tf-acc-test-iam-policy","Terraform":"test"}}},"schema_version":0},{"address":"aws_iam_policy.s3_service_principal_passes","mode":"managed","type":"aws_iam_policy","name":"s3_service_principal_passes","provider_config_key":"aws","expressions":{"description":{"constant_value":"Passes with an account condition"},"name":{"constant_value":"Service_principal_passes"},"path":{"constant_value":"/"},"policy":{"references":["data.aws_iam_policy_document.s3_service_principal_with_account.json","data.aws_iam_policy_document.s3_service_principal_with_account"]},"tags":{"constant_value":{"CostCentre":"tf-acc-test-iam-policy","Terraform":"test"}}},"schema_version":0},{"address":"aws_iam_role.ecs-service","mode":"managed","type":"aws_iam_role","name":"ecs-service","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.ecs-service.json","data.aws_iam_policy_document.ecs-service"]},"name":{"constant_value":"ecs-role"}},"schema_version":0},{"address":"aws_iam_role.iam_for_lambda","mode":"managed","type":"aws_iam_role","name":"iam_for_lambda","provider_config_key":"aws","expressions":{"assume_role_policy":{"constant_value":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      },\n      \"Effect\": \"Allow\",\n      \"Sid\": \"\"\n    }\n  ]\n}\n"},"name":{"constant_value":"iam_for_lambda"}},"schema_version":0},{"address":"aws_iam_role.iam_for_lambda_with_eni","mode":"managed","type":"aws_iam_role","name":"iam_for_lambda_with_eni","provider_config_key":"aws","expressions":{"assume_role_policy":{"constant_value":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      },\n      \"Effect\": \"Allow\",\n      \"Sid\": \"\"\n    }\n  ]\n}\n"},"name":{"constant_value":"iam_for_lambda_with_eni"}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.lambda","mode":"managed","type":"aws_iam_role_policy_attachment","name":"lambda","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AWSLambdaVPCAccessExecutionRole"},"role":{"references":["aws_iam_role.iam_for_lambda_with_eni.name","aws_iam_role.iam_for_lambda_with_eni"]}},"schema_version":0},{"address":"aws_lambda_function.test_lambda_with_bad_runtime","mode":"managed","type":"aws_lambda_function","name":"test_lambda_with_bad_runtime","provider_config_key":"aws","expressions":{"filename":{"constant_value":"mocks/test.zip"},"function_name":{"constant_value":"test_lambda_with_bad_runtime"},"handler":{"constant_value":"index.test"},"role":{"references":["aws_iam_role.iam_for_lambda.arn","aws_iam_role.iam_for_lambda"]},"runtime":{"constant_value":"nodejs12.x"},"source_code_hash":{}},"schema_version":0},{"address":"aws_lambda_function.test_lambda_with_good_runtime","mode":"managed","type":"aws_lambda_function","name":"test_lambda_with_good_runtime","provider_config_key":"aws","expressions":{"filename":{"constant_value":"mocks/test.zip"},"function_name":{"constant_value":"test_lambda_with_good_runtime"},"handler":{"constant_value":"index.test"},"role":{"references":["aws_iam_role.iam_for_lambda.arn","aws_iam_role.iam_for_lambda"]},"runtime":{"constant_value":"nodejs18.x"},"source_code_hash":{}},"schema_version":0},{"address":"aws_lambda_function.test_vpc_lambda_with_eni_policy","mode":"managed","type":"aws_lambda_function","name":"test_vpc_lambda_with_eni_policy","provider_config_key":"aws","expressions":{"filename":{"constant_value":"mocks/test.zip"},"function_name":{"constant_value":"test_vpc_lambda_with_eni_policy"},"handler":{"constant_value":"index.test"},"role":{"references":["aws_iam_role.iam_for_lambda_with_eni.arn","aws_iam_role.iam_for_lambda_with_eni"]},"runtime":{"constant_value":"nodejs16.x"},"source_code_hash":{},"vpc_config":[{"security_group_ids":{"constant_value":[]},"subnet_ids":{"constant_value":[]}}]},"schema_version":0},{"address":"aws_lambda_function.test_vpc_lambda_with_missing_eni_policy","mode":"managed","type":"aws_lambda_function","name":"test_vpc_lambda_with_missing_eni_policy","provider_config_key":"aws","expressions":{"filename":{"constant_value":"mocks/test.zip"},"function_name":{"constant_value":"test_vpc_lambda_with_missing_eni_policy"},"handler":{"constant_value":"index.test"},"role":{"references":["aws_iam_role.iam_for_lambda.arn","aws_iam_role.iam_for_lambda"]},"runtime":{"constant_value":"nodejs16.x"},"source_code_hash":{},"vpc_config":[{"security_group_ids":{"constant_value":[]},"subnet_ids":{"constant_value":[]}}]},"schema_version":0},{"address":"aws_security_group.bad_ports_for_protocol","mode":"managed","type":"aws_security_group","name":"bad_ports_for_protocol","provider_config_key":"aws","expressions":{"name":{"constant_value":"bad_ports_for_protocol"},"tags":{"constant_value":{"CostCentre":"tf-test-sg","Terraform":"test"}},"vpc_id":{"references":["module.vpc.vpc_id","module.vpc"]}},"schema_version":1},{"address":"aws_security_group.good_ports_for_protocol","mode":"managed","type":"aws_security_group","name":"good_ports_for_protocol","provider_config_key":"aws","expressions":{"name":{"constant_value":"good_ports_for_protocol"},"tags":{"constant_value":{"CostCentre":"tf-test-sg","Terraform":"test"}},"vpc_id":{"references":["module.vpc.vpc_id","module.vpc"]}},"schema_version":1},{"address":"aws_security_group.tcp_protocol","mode":"managed","type":"aws_security_group","name":"tcp_protocol","provider_config_key":"aws","expressions":{"name":{"constant_value":"tcp_protocol"},"tags":{"constant_value":{"CostCentre":"tf-test-sg","Terraform":"test"}},"vpc_id":{"references":["module.vpc.vpc_id","module.vpc"]}},"schema_version":1},{"address":"aws_wafv2_web_acl.better_gandalf","mode":"managed","type":"aws_wafv2_web_acl","name":"better_gandalf","provider_config_key":"aws","expressions":{"default_action":[{"allow":[{}]}],"description":{"constant_value":"None shall pass"},"name":{"constant_value":"blocker"},"rule":[{"name":{"constant_value":"AWSManagedRulesKnownBadInputsRuleSet"},"override_action":[{"none":[{}]}],"priority":{"constant_value":1},"statement":[{"managed_rule_group_statement":[{"name":{"constant_value":"AWSManagedRulesKnownBadInputsRuleSet"},"vendor_name":{"constant_value":"AWS"}}]}],"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":true},"metric_name":{"constant_value":"AWSManagedRulesKnownBadInputsRuleSet"},"sampled_requests_enabled":{"constant_value":true}}]},{"name":{"constant_value":"AWSManagedRulesLinuxRuleSet"},"override_action":[{"none":[{}]}],"priority":{"constant_value":2},"statement":[{"managed_rule_group_statement":[{"name":{"constant_value":"AWSManagedRulesLinuxRuleSet"},"vendor_name":{"constant_value":"AWS"}}]}],"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":true},"metric_name":{"constant_value":"AWSManagedRulesLinuxRuleSet"},"sampled_requests_enabled":{"constant_value":true}}]}],"scope":{"constant_value":"CLOUDFRONT"},"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":false},"metric_name":{"constant_value":"friendly-metric-name"},"sampled_requests_enabled":{"constant_value":false}}]},"schema_version":0},{"address":"aws_wafv2_web_acl.gandalf","mode":"managed","type":"aws_wafv2_web_acl","name":"gandalf","provider_config_key":"aws","expressions":{"default_action":[{"allow":[{}]}],"description":{"constant_value":"None shall pass"},"name":{"constant_value":"blocker"},"rule":[{"name":{"constant_value":"AWSManagedRulesKnownBadInputsRuleSet"},"override_action":[{"none":[{}]}],"priority":{"constant_value":1},"statement":[{"managed_rule_group_statement":[{"name":{"constant_value":"AWSManagedRulesKnownBadInputsRuleSet"},"vendor_name":{"constant_value":"AWS"}}]}],"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":true},"metric_name":{"constant_value":"AWSManagedRulesKnownBadInputsRuleSet"},"sampled_requests_enabled":{"constant_value":true}}]},{"name":{"constant_value":"AWSManagedRulesLinuxRuleSet"},"override_action":[{"none":[{}]}],"priority":{"constant_value":1},"statement":[{"managed_rule_group_statement":[{"name":{"constant_value":"AWSManagedRulesLinuxRuleSet"},"vendor_name":{"constant_value":"AWS"}}]}],"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":true},"metric_name":{"constant_value":"AWSManagedRulesLinuxRuleSet"},"sampled_requests_enabled":{"constant_value":true}}]}],"scope":{"constant_value":"CLOUDFRONT"},"visibility_config":[{"cloudwatch_metrics_enabled":{"constant_value":false},"metric_name":{"constant_value":"friendly-metric-name"},"sampled_requests_enabled":{"constant_value":false}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.ecs-service","mode":"data","type":"aws_iam_policy_document","name":"ecs-service","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"constant_value":["ecs-tasks.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0},{"address":"data.aws_iam_policy_document.lambda_service_principal","mode":"data","type":"aws_iam_policy_document","name":"lambda_service_principal","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["lambda.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0},{"address":"data.aws_iam_policy_document.not_a_service_prinicpal","mode":"data","type":"aws_iam_policy_document","name":"not_a_service_prinicpal","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["kms:*"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["123456789012","555555555555"]},"type":{"constant_value":"AWS"}}]}]},"schema_version":0},{"address":"data.aws_iam_policy_document.s3_service_principal","mode":"data","type":"aws_iam_policy_document","name":"s3_service_principal","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["kms:*"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["s3.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0},{"address":"data.aws_iam_policy_document.s3_service_principal_with_account","mode":"data","type":"aws_iam_policy_document","name":"s3_service_principal_with_account","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["kms:*"]},"condition":[{"test":{"constant_value":"StringLike"},"values":{"constant_value":["account"]},"variable":{"constant_value":"AWS:SourceAccount"}}],"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["s3.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0},{"address":"data.template_file.ecs-service","mode":"data","type":"template_file","name":"ecs-service","provider_config_key":"template","expressions":{"template":{},"vars":{"constant_value":{"image":"fooBar"}}},"schema_version":0}],"module_calls":{"rds":{"source":"github.com/cds-snc/terraform-modules//rds","expressions":{"backup_retention_period":{"constant_value":7},"billing_tag_value":{"constant_value":"cal"},"database_name":{"constant_value":"foo"},"engine_version":{"constant_value":"13.3"},"name":{"constant_value":"test-rds"},"password":{"constant_value":"foo"},"preferred_backup_window":{"constant_value":"07:00-09:00"},"subnet_ids":{"references":["module.vpc.public_subnet_ids","module.vpc"]},"username":{"constant_value":"calvin"},"vpc_id":{"references":["module.vpc.vpc_id","module.vpc"]}},"module":{"outputs":{"proxy_connection_string_arn":{"expression":{"references":["aws_secretsmanager_secret.proxy_connection_string.arn","aws_secretsmanager_secret.proxy_connection_string"]},"description":"The arn for the connectionstring to the RDS proxy"},"proxy_connection_string_value":{"sensitive":true,"expression":{"references":["aws_secretsmanager_secret_version.proxy_connection_string.secret_string","aws_secretsmanager_secret_version.proxy_connection_string"]}},"proxy_endpoint":{"expression":{"references":["aws_db_proxy.proxy.endpoint","aws_db_proxy.proxy"]}},"proxy_security_group_arn":{"expression":{"references":["aws_security_group.rds_proxy.arn","aws_security_group.rds_proxy"]}},"proxy_security_group_id":{"expression":{"references":["aws_security_group.rds_proxy.id","aws_security_group.rds_proxy"]}},"rds_cluster_id":{"expression":{"references":["aws_rds_cluster.cluster.id","aws_rds_cluster.cluster"]},"description":"The ID of the RDS cluster"}},"resources":[{"address":"aws_cloudwatch_log_group.log_exports","mode":"managed","type":"aws_cloudwatch_log_group","name":"log_exports","provider_config_key":"rds:aws","expressions":{"name":{"references":["local.identifier","each.value"]},"retention_in_days":{"constant_value":30},"tags":{"references":["local.common_tags","var.name"]}},"schema_version":0,"for_each_expression":{"references":["local.enabled_cloudwatch_logs_exports"]}},{"address":"aws_cloudwatch_log_group.proxy","mode":"managed","type":"aws_cloudwatch_log_group","name":"proxy","provider_config_key":"rds:aws","expressions":{"name":{"references":["local.proxy_name"]},"retention_in_days":{"references":["var.proxy_log_retention_in_days"]},"tags":{"references":["local.common_tags","var.name"]}},"schema_version":0},{"address":"aws_db_event_subscription.rds_sg_events_alerts","mode":"managed","type":"aws_db_event_subscription","name":"rds_sg_events_alerts","provider_config_key":"rds:aws","expressions":{"event_categories":{"constant_value":["configuration change","failure"]},"name":{"references":["var.name"]},"sns_topic":{"references":["var.security_group_notifications_topic_arn"]},"source_type":{"constant_value":"db-security-group"}},"schema_version":0,"count_expression":{"references":["var.security_group_notifications_topic_arn"]}},{"address":"aws_db_proxy.proxy","mode":"managed","type":"aws_db_proxy","name":"proxy","provider_config_key":"rds:aws","expressions":{"auth":[{"auth_scheme":{"constant_value":"SECRETS"},"description":{"constant_value":"The database connection string"},"iam_auth":{"constant_value":"DISABLED"},"secret_arn":{"references":["aws_secretsmanager_secret.connection_string.arn","aws_secretsmanager_secret.connection_string"]}}],"debug_logging":{"references":["var.proxy_debug_logging"]},"engine_family":{"references":["local.engine_family"]},"idle_client_timeout":{"constant_value":1800},"name":{"references":["local.proxy_name"]},"require_tls":{"constant_value":true},"role_arn":{"references":["aws_iam_role.rds_proxy.arn","aws_iam_role.rds_proxy"]},"tags":{"references":["local.common_tags","var.name"]},"vpc_security_group_ids":{"references":["local.security_group_ids"]},"vpc_subnet_ids":{"references":["var.subnet_ids"]}},"schema_version":0},{"address":"aws_db_proxy_default_target_group.this","mode":"managed","type":"aws_db_proxy_default_target_group","name":"this","provider_config_key":"rds:aws","expressions":{"db_proxy_name":{"references":["aws_db_proxy.proxy.name","aws_db_proxy.proxy"]}},"schema_version":0},{"address":"aws_db_proxy_target.target","mode":"managed","type":"aws_db_proxy_target","name":"target","provider_config_key":"rds:aws","expressions":{"db_cluster_identifier":{"references":["aws_rds_cluster.cluster.id","aws_rds_cluster.cluster"]},"db_proxy_name":{"references":["aws_db_proxy.proxy.name","aws_db_proxy.proxy"]},"target_group_name":{"references":["aws_db_proxy_default_target_group.this.name","aws_db_proxy_default_target_group.this"]}},"schema_version":0},{"address":"aws_db_subnet_group.rds","mode":"managed","type":"aws_db_subnet_group","name":"rds","provider_config_key":"rds:aws","expressions":{"name":{"references":["var.name"]},"subnet_ids":{"references":["var.subnet_ids"]},"tags":{"references":["local.common_tags","var.name"]}},"schema_version":0},{"address":"aws_iam_policy.read_connection_string","mode":"managed","type":"aws_iam_policy","name":"read_connection_string","provider_config_key":"rds:aws","expressions":{"name":{"references":["var.name"]},"path":{"constant_value":"/"},"policy":{"references":["data.aws_iam_policy_document.read_connection_string.json","data.aws_iam_policy_document.read_connection_string"]},"tags":{"references":["local.common_tags"]}},"schema_version":0},{"address":"aws_iam_role.rds_proxy","mode":"managed","type":"aws_iam_role","name":"rds_proxy","provider_config_key":"rds:aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.assume_role.json","data.aws_iam_policy_document.assume_role"]},"name":{"references":["var.name"]},"tags":{"references":["local.common_tags"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.read_connection_string","mode":"managed","type":"aws_iam_role_policy_attachment","name":"read_connection_string","provider_config_key":"rds:aws","expressions":{"policy_arn":{"references":["aws_iam_policy.read_connection_string.arn","aws_iam_policy.read_connection_string"]},"role":{"references":["aws_iam_role.rds_proxy.name","aws_iam_role.rds_proxy"]}},"schema_version":0},{"address":"aws_rds_cluster.cluster","mode":"managed","type":"aws_rds_cluster","name":"cluster","provider_config_key":"rds:aws","expressions":{"allow_major_version_upgrade":{"references":["var.allow_major_version_upgrade"]},"apply_immediately":{"references":["var.upgrade_immediately"]},"backtrack_window":{"references":["var.engine","var.backtrack_window"]},"backup_retention_period":{"references":["var.backup_retention_period"]},"cluster_identifier":{"references":["local.identifier"]},"copy_tags_to_snapshot":{"constant_value":true},"database_name":{"references":["var.database_name"]},"db_cluster_parameter_group_name":{"references":["var.db_cluster_parameter_group_name"]},"db_subnet_group_name":{"references":["aws_db_subnet_group.rds.name","aws_db_subnet_group.rds"]},"deletion_protection":{"references":["var.prevent_cluster_deletion"]},"enabled_cloudwatch_logs_exports":{"references":["local.enabled_cloudwatch_logs_exports"]},"engine":{"references":["var.engine"]},"engine_version":{"references":["var.engine_version"]},"final_snapshot_identifier":{"references":["var.name","random_string.random.result","random_string.random"]},"master_password":{"references":["var.password"]},"master_username":{"references":["var.username"]},"preferred_backup_window":{"references":["var.preferred_backup_window"]},"preferred_maintenance_window":{"references":["var.preferred_maintenance_window"]},"skip_final_snapshot":{"references":["var.skip_final_snapshot"]},"snapshot_identifier":{"references":["var.snapshot_identifier"]},"storage_encrypted":{"constant_value":true},"tags":{"references":["local.common_tags","var.name"]},"vpc_security_group_ids":{"references":["local.security_group_ids"]}},"schema_version":0,"depends_on":["aws_cloudwatch_log_group.log_exports"]},{"address":"aws_rds_cluster_instance.instances","mode":"managed","type":"aws_rds_cluster_instance","name":"instances","provider_config_key":"rds:aws","expressions":{"cluster_identifier":{"references":["aws_rds_cluster.cluster.id","aws_rds_cluster.cluster"]},"db_subnet_group_name":{"references":["aws_db_subnet_group.rds.name","aws_db_subnet_group.rds"]},"engine":{"references":["var.engine"]},"engine_version":{"references":["var.engine_version"]},"identifier":{"references":["var.name","count.index"]},"instance_class":{"references":["var.instance_class"]},"performance_insights_enabled":{"references":["var.performance_insights_enabled"]},"tags":{"references":["local.common_tags","var.name","count.index"]}},"schema_version":0,"count_expression":{"references":["var.instances"]}},{"address":"aws_secretsmanager_secret.connection_string","mode":"managed","type":"aws_secretsmanager_secret","name":"connection_string","provider_config_key":"rds:aws","expressions":{"name":{"references":["var.name","random_string.random.result","random_string.random"]},"tags":{"references":["local.common_tags"]}},"schema_version":0},{"address":"aws_secretsmanager_secret.proxy_connection_string","mode":"managed","type":"aws_secretsmanager_secret","name":"proxy_connection_string","provider_config_key":"rds:aws","expressions":{"name":{"references":["var.name","random_string.random.result","random_string.random"]},"tags":{"references":["local.common_tags"]}},"schema_version":0},{"address":"aws_secretsmanager_secret_version.connection_string","mode":"managed","type":"aws_secretsmanager_secret_version","name":"connection_string","provider_config_key":"rds:aws","expressions":{"secret_id":{"references":["aws_secretsmanager_secret.connection_string.id","aws_secretsmanager_secret.connection_string"]},"secret_string":{"references":["var.username","var.password"]}},"schema_version":0},{"address":"aws_secretsmanager_secret_version.proxy_connection_string","mode":"managed","type":"aws_secretsmanager_secret_version","name":"proxy_connection_string","provider_config_key":"rds:aws","expressions":{"secret_id":{"references":["aws_secretsmanager_secret.proxy_connection_string.id","aws_secretsmanager_secret.proxy_connection_string"]},"secret_string":{"references":["local.is_mysql","aws_db_proxy.proxy.endpoint","aws_db_proxy.proxy","var.database_name","var.username","var.password","var.username","var.password","aws_db_proxy.proxy.endpoint","aws_db_proxy.proxy","var.database_name"]}},"schema_version":0},{"address":"aws_security_group.rds_proxy","mode":"managed","type":"aws_security_group","name":"rds_proxy","provider_config_key":"rds:aws","expressions":{"description":{"constant_value":"The Security group that allows communication between the proxy and the database"},"name":{"references":["var.name"]},"tags":{"references":["local.common_tags","var.name"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1},{"address":"random_string.random","mode":"managed","type":"random_string","name":"random","provider_config_key":"rds:random","expressions":{"length":{"constant_value":6},"special":{"constant_value":false},"upper":{"constant_value":false}},"schema_version":2},{"address":"data.aws_iam_policy_document.assume_role","mode":"data","type":"aws_iam_policy_document","name":"assume_role","provider_config_key":"rds:aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["rds.amazonaws.com"]},"type":{"constant_value":"Service"}}],"sid":{"constant_value":"RDSAssume"}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.read_connection_string","mode":"data","type":"aws_iam_policy_document","name":"read_connection_string","provider_config_key":"rds:aws","expressions":{"statement":[{"actions":{"constant_value":["secretsmanager:GetResourcePolicy","secretsmanager:GetSecretValue","secretsmanager:DescribeSecret","secretsmanager:ListSecretVersionIds"]},"effect":{"constant_value":"Allow"},"resources":{"references":["aws_secretsmanager_secret.connection_string.arn","aws_secretsmanager_secret.connection_string"]},"sid":{"constant_value":0}},{"actions":{"constant_value":["secretsmanager:ListSecrets"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":1}},{"actions":{"constant_value":["kms:Decrypt"]},"condition":[{"test":{"constant_value":"StringEquals"},"values":{"constant_value":["secretsmanager.ca-central-1.amazonaws.com"]},"variable":{"constant_value":"kms:ViaService"}}],"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"constant_value":2}}]},"schema_version":0}],"variables":{"allow_major_version_upgrade":{"default":false,"description":"(Optional, default 'false') This flag allows RDS to perform a major engine upgrade. \u003cbr/\u003e **Please Note:** This could break things so make sure you know that your code is compatible with the new features in this version."},"backtrack_window":{"default":259200,"description":"(Optional, defaults to 72 hours) The number of days to retain a backtrack. Set to 0 to disable backtracking.  This is only valid for the `aurora-mysql` engine type."},"backup_retention_period":{"description":"(Required) The amount of days to keep backups for."},"billing_tag_key":{"default":"CostCentre","description":"(Optional, default 'CostCentre') The name of the billing tag"},"billing_tag_value":{"description":"(Required) The value of the billing tag"},"database_name":{"description":"(Required) The name of the database to be created inside the cluster."},"db_cluster_parameter_group_name":{"default":null,"description":"(Optional, no default) Name of DB cluster parameter group to associate with this DB cluster."},"enabled_cloudwatch_logs_exports":{"default":[],"description":"(Optional, default empty list) The database log types to export to CloudWatch. Valid values are `audit`, `error`, `general`, `slowquery`, `postgresql`."},"engine":{"default":"aurora-postgresql","description":"(Optional, defaults 'aurora-postgresql') The database engine to use. Valid values are 'aurora-postgresql' and 'aurora-mysql'"},"engine_version":{"description":"(Required) The database version to use. Engine version is contingent on instance_class see [this list of supported combinations](https://docs.amazonaws.cn/en_us/AmazonRDS/latest/AuroraUserGuide/Concepts.DBInstanceClass.html#Concepts.DBInstanceClass.SupportAurora)"},"instance_class":{"default":"db.t3.medium","description":"(Optional, default 'db.t3.medium') The type of EC2 instance to run this on."},"instances":{"default":3,"description":"(Optional, default '3') The number of RDS Cluster instances to create, defaults to HA mode."},"name":{"description":"(Required) The name of the db also used for other identifiers"},"password":{"description":"(Required) The password for the admin user for the db","sensitive":true},"performance_insights_enabled":{"default":true,"description":"(Optional, default 'true') This flag enables performance insights for the RDS cluster instances."},"preferred_backup_window":{"description":"(Required) The time you want your DB to be backedup. Takes the format `\"07:00-09:00\"`"},"preferred_maintenance_window":{"default":"sun:06:00-sun:07:00","description":"(Optional) The UTC time you want your DB to be maintained. Takes the format `\"wed:06:00-wed:07:00\"`"},"prevent_cluster_deletion":{"default":true,"description":"(Optional, default 'true') This flag prevents deletion of the RDS cluster. \u003cbr/\u003e **Please Note:** We cannot prevent deletion of RDS instances in the module, we recommend you add `lifecycle { prevent_deletion = true }` to the module to prevent instance deletion"},"proxy_debug_logging":{"default":false,"description":"(Optional, default 'false') Allows the proxy to log debug information. \u003cbr/\u003e **Please Note:** This will include all sql commands and potential sensitive information"},"proxy_log_retention_in_days":{"default":14,"description":"(Optional, default '14') The number of days to retain the proxy logs in cloudwatch"},"security_group_ids":{"default":[],"description":"(Optional, default '[]') A list of additional security group IDs to associate with the RDS cluster."},"security_group_notifications_topic_arn":{"default":"","description":"(Optional) The SNS topic ARN to send notifications about security group changes to."},"serverless_max_capacity":{"default":0,"description":"(Optional) The maximum capacity of the Aurora serverless cluster (0.5 to 128 in increments of 0.5)"},"serverless_min_capacity":{"default":0,"description":"(Optional) The minimum capacity of the Aurora serverless cluster (0.5 to 128 in increments of 0.5)"},"skip_final_snapshot":{"default":false,"description":"(Optional, default 'false') This flag determines if a final database snapshot it taken before the cluster is deleted."},"snapshot_identifier":{"default":null,"description":"(Optional, no default) The name or ARN of the DB cluster snapshot to create the cluster from."},"subnet_ids":{"description":"(Required) The name of the subnet the DB has to stay in"},"upgrade_immediately":{"default":false,"description":"(Optional, default false) Apply database engine upgrades immediately."},"username":{"description":"(Required) The username for the admin user for the db"},"vpc_id":{"description":"(Required) The vpc to run the cluster and related infrastructure in"}}}},"vpc":{"source":"github.com/cds-snc/terraform-modules//vpc","expressions":{"billing_tag_value":{"constant_value":"cal"},"enable_eip":{"constant_value":false},"high_availability":{"constant_value":true},"name":{"constant_value":"vpc"}},"module":{"outputs":{"cidr_block":{"expression":{"references":["aws_vpc.main.cidr_block","aws_vpc.main"]}},"main_nacl_id":{"expression":{"references":["aws_network_acl.main.id","aws_network_acl.main"]}},"main_route_table_id":{"expression":{"references":["aws_vpc.main.main_route_table_id","aws_vpc.main"]}},"private_route_table_ids":{"expression":{"references":["aws_route_table.private"]}},"private_subnet_cidr_blocks":{"expression":{"references":["aws_subnet.private"]}},"private_subnet_ids":{"expression":{"references":["aws_subnet.private"]}},"public_ips":{"expression":{"references":["aws_eip.nat"]}},"public_subnet_cidr_blocks":{"expression":{"references":["aws_subnet.public"]}},"public_subnet_ids":{"expression":{"references":["aws_subnet.public"]}},"vpc_id":{"expression":{"references":["aws_vpc.main.id","aws_vpc.main"]}}},"resources":[{"address":"aws_cloudwatch_log_group.flow_logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"flow_logs","provider_config_key":"vpc:aws","expressions":{"name":{"references":["var.name"]},"retention_in_days":{"constant_value":30},"tags":{"references":["local.common_tags"]}},"schema_version":0,"count_expression":{"references":["var.enable_flow_log"]}},{"address":"aws_default_network_acl.default","mode":"managed","type":"aws_default_network_acl","name":"default","provider_config_key":"vpc:aws","expressions":{"default_network_acl_id":{"references":["aws_vpc.main.default_network_acl_id","aws_vpc.main"]},"tags":{"references":["local.common_tags","var.name"]}},"schema_version":0},{"address":"aws_default_route_table.default","mode":"managed","type":"aws_default_route_table","name":"default","provider_config_key":"vpc:aws","expressions":{"default_route_table_id":{"references":["aws_vpc.main.default_route_table_id","aws_vpc.main"]},"route":{"constant_value":[]},"tags":{"references":["local.common_tags","var.name"]}},"schema_version":0},{"address":"aws_default_security_group.default","mode":"managed","type":"aws_default_security_group","name":"default","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["local.common_tags","var.name"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":1},{"address":"aws_eip.nat","mode":"managed","type":"aws_eip","name":"nat","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["local.common_tags","var.name","count.index"]},"vpc":{"constant_value":true}},"schema_version":0,"count_expression":{"references":["var.enable_eip","local.nat_gateway_count"]}},{"address":"aws_flow_log.flow_logs","mode":"managed","type":"aws_flow_log","name":"flow_logs","provider_config_key":"vpc:aws","expressions":{"iam_role_arn":{"references":["aws_iam_role.flow_logs[0].arn","aws_iam_role.flow_logs[0]","aws_iam_role.flow_logs"]},"log_destination":{"references":["aws_cloudwatch_log_group.flow_logs[0].arn","aws_cloudwatch_log_group.flow_logs[0]","aws_cloudwatch_log_group.flow_logs"]},"tags":{"references":["local.common_tags"]},"traffic_type":{"constant_value":"ALL"},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":0,"count_expression":{"references":["var.enable_flow_log"]}},{"address":"aws_iam_policy.vpc_metrics_flow_logs_write_policy","mode":"managed","type":"aws_iam_policy","name":"vpc_metrics_flow_logs_write_policy","provider_config_key":"vpc:aws","expressions":{"description":{"constant_value":"IAM policy for writing flow logs in CloudWatch"},"name":{"constant_value":"VpcMetricsFlowLogsWrite"},"path":{"constant_value":"/"},"policy":{"references":["data.aws_iam_policy_document.vpc_metrics_flow_logs_write[0].json","data.aws_iam_policy_document.vpc_metrics_flow_logs_write[0]","data.aws_iam_policy_document.vpc_metrics_flow_logs_write"]},"tags":{"references":["local.common_tags"]}},"schema_version":0,"count_expression":{"references":["var.enable_flow_log"]}},{"address":"aws_iam_role.flow_logs","mode":"managed","type":"aws_iam_role","name":"flow_logs","provider_config_key":"vpc:aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.vpc_flow_logs_service_principal[0].json","data.aws_iam_policy_document.vpc_flow_logs_service_principal[0]","data.aws_iam_policy_document.vpc_flow_logs_service_principal"]},"name":{"references":["var.name"]},"tags":{"references":["local.common_tags"]}},"schema_version":0,"count_expression":{"references":["var.enable_flow_log"]}},{"address":"aws_iam_role_policy_attachment.vpc_metrics_flow_logs_write_policy_attach","mode":"managed","type":"aws_iam_role_policy_attachment","name":"vpc_metrics_flow_logs_write_policy_attach","provider_config_key":"vpc:aws","expressions":{"policy_arn":{"references":["aws_iam_policy.vpc_metrics_flow_logs_write_policy[0].arn","aws_iam_policy.vpc_metrics_flow_logs_write_policy[0]","aws_iam_policy.vpc_metrics_flow_logs_write_policy"]},"role":{"references":["aws_iam_role.flow_logs[0].name","aws_iam_role.flow_logs[0]","aws_iam_role.flow_logs"]}},"schema_version":0,"count_expression":{"references":["var.enable_flow_log"]}},{"address":"aws_internet_gateway.gw","mode":"managed","type":"aws_internet_gateway","name":"gw","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["local.common_tags","var.name"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":0},{"address":"aws_nat_gateway.nat_gw","mode":"managed","type":"aws_nat_gateway","name":"nat_gw","provider_config_key":"vpc:aws","expressions":{"allocation_id":{"references":["local.nat_gateway_ips","local.nat_gateway_ips","var.single_nat_gateway","count.index"]},"connectivity_type":{"references":["var.enable_eip"]},"subnet_id":{"references":["aws_subnet.public","var.single_nat_gateway","count.index"]},"tags":{"references":["local.common_tags","var.name","count.index"]}},"schema_version":0,"count_expression":{"references":["local.nat_gateway_count"]},"depends_on":["aws_internet_gateway.gw"]},{"address":"aws_network_acl.main","mode":"managed","type":"aws_network_acl","name":"main","provider_config_key":"vpc:aws","expressions":{"subnet_ids":{"references":["aws_subnet.public","aws_subnet.private"]},"tags":{"references":["local.common_tags","var.name"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":0},{"address":"aws_network_acl_rule.block_rdp","mode":"managed","type":"aws_network_acl_rule","name":"block_rdp","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"constant_value":"0.0.0.0/0"},"egress":{"constant_value":false},"from_port":{"constant_value":3389},"network_acl_id":{"references":["aws_network_acl.main.id","aws_network_acl.main"]},"protocol":{"constant_value":"tcp"},"rule_action":{"constant_value":"deny"},"rule_number":{"constant_value":51},"to_port":{"constant_value":3389}},"schema_version":0,"count_expression":{"references":["var.block_rdp"]}},{"address":"aws_network_acl_rule.block_ssh","mode":"managed","type":"aws_network_acl_rule","name":"block_ssh","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"constant_value":"0.0.0.0/0"},"egress":{"constant_value":false},"from_port":{"constant_value":22},"network_acl_id":{"references":["aws_network_acl.main.id","aws_network_acl.main"]},"protocol":{"constant_value":"tcp"},"rule_action":{"constant_value":"deny"},"rule_number":{"constant_value":50},"to_port":{"constant_value":22}},"schema_version":0,"count_expression":{"references":["var.block_ssh"]}},{"address":"aws_network_acl_rule.https_request_egress_443","mode":"managed","type":"aws_network_acl_rule","name":"https_request_egress_443","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"constant_value":"0.0.0.0/0"},"egress":{"constant_value":true},"from_port":{"constant_value":443},"network_acl_id":{"references":["aws_network_acl.main.id","aws_network_acl.main"]},"protocol":{"constant_value":"tcp"},"rule_action":{"constant_value":"allow"},"rule_number":{"constant_value":60},"to_port":{"constant_value":443}},"schema_version":0,"count_expression":{"references":["var.allow_https_request_out"]}},{"address":"aws_network_acl_rule.https_request_in_ingress_443","mode":"managed","type":"aws_network_acl_rule","name":"https_request_in_ingress_443","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"constant_value":"0.0.0.0/0"},"egress":{"constant_value":false},"from_port":{"constant_value":443},"network_acl_id":{"references":["aws_network_acl.main.id","aws_network_acl.main"]},"protocol":{"constant_value":"tcp"},"rule_action":{"constant_value":"allow"},"rule_number":{"constant_value":70},"to_port":{"constant_value":443}},"schema_version":0,"count_expression":{"references":["var.allow_https_request_in"]}},{"address":"aws_network_acl_rule.https_request_in_ingress_ephemeral","mode":"managed","type":"aws_network_acl_rule","name":"https_request_in_ingress_ephemeral","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["aws_vpc.main.cidr_block","aws_vpc.main"]},"egress":{"constant_value":false},"from_port":{"constant_value":1024},"network_acl_id":{"references":["aws_network_acl.main.id","aws_network_acl.main"]},"protocol":{"constant_value":"tcp"},"rule_action":{"constant_value":"allow"},"rule_number":{"constant_value":71},"to_port":{"constant_value":65535}},"schema_version":0,"count_expression":{"references":["var.allow_https_request_in"]}},{"address":"aws_network_acl_rule.https_request_in_response_egress_443","mode":"managed","type":"aws_network_acl_rule","name":"https_request_in_response_egress_443","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["aws_vpc.main.cidr_block","aws_vpc.main"]},"egress":{"constant_value":true},"from_port":{"constant_value":443},"network_acl_id":{"references":["aws_network_acl.main.id","aws_network_acl.main"]},"protocol":{"constant_value":"tcp"},"rule_action":{"constant_value":"allow"},"rule_number":{"constant_value":72},"to_port":{"constant_value":443}},"schema_version":0,"count_expression":{"references":["var.allow_https_request_in_response"]}},{"address":"aws_network_acl_rule.https_request_in_response_egress_ephemeral","mode":"managed","type":"aws_network_acl_rule","name":"https_request_in_response_egress_ephemeral","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"constant_value":"0.0.0.0/0"},"egress":{"constant_value":true},"from_port":{"constant_value":1024},"network_acl_id":{"references":["aws_network_acl.main.id","aws_network_acl.main"]},"protocol":{"constant_value":"tcp"},"rule_action":{"constant_value":"allow"},"rule_number":{"constant_value":73},"to_port":{"constant_value":65535}},"schema_version":0,"count_expression":{"references":["var.allow_https_request_in_response"]}},{"address":"aws_network_acl_rule.https_request_out_egress_ephemeral","mode":"managed","type":"aws_network_acl_rule","name":"https_request_out_egress_ephemeral","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["aws_vpc.main.cidr_block","aws_vpc.main"]},"egress":{"constant_value":true},"from_port":{"constant_value":1024},"network_acl_id":{"references":["aws_network_acl.main.id","aws_network_acl.main"]},"protocol":{"constant_value":"tcp"},"rule_action":{"constant_value":"allow"},"rule_number":{"constant_value":61},"to_port":{"constant_value":65535}},"schema_version":0,"count_expression":{"references":["var.allow_https_request_out"]}},{"address":"aws_network_acl_rule.https_request_out_response_ingress_443","mode":"managed","type":"aws_network_acl_rule","name":"https_request_out_response_ingress_443","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["aws_vpc.main.cidr_block","aws_vpc.main"]},"egress":{"constant_value":false},"from_port":{"constant_value":443},"network_acl_id":{"references":["aws_network_acl.main.id","aws_network_acl.main"]},"protocol":{"constant_value":"tcp"},"rule_action":{"constant_value":"allow"},"rule_number":{"constant_value":62},"to_port":{"constant_value":443}},"schema_version":0,"count_expression":{"references":["var.allow_https_request_out_response"]}},{"address":"aws_network_acl_rule.https_request_out_response_ingress_ephemeral","mode":"managed","type":"aws_network_acl_rule","name":"https_request_out_response_ingress_ephemeral","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"constant_value":"0.0.0.0/0"},"egress":{"constant_value":false},"from_port":{"constant_value":1024},"network_acl_id":{"references":["aws_network_acl.main.id","aws_network_acl.main"]},"protocol":{"constant_value":"tcp"},"rule_action":{"constant_value":"allow"},"rule_number":{"constant_value":63},"to_port":{"constant_value":65535}},"schema_version":0,"count_expression":{"references":["var.allow_https_request_out_response"]}},{"address":"aws_route.private_nat_gateway","mode":"managed","type":"aws_route","name":"private_nat_gateway","provider_config_key":"vpc:aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"nat_gateway_id":{"references":["aws_nat_gateway.nat_gw","count.index"]},"route_table_id":{"references":["aws_route_table.private","count.index"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0,"count_expression":{"references":["local.nat_gateway_count"]}},{"address":"aws_route.public_internet_gateway","mode":"managed","type":"aws_route","name":"public_internet_gateway","provider_config_key":"vpc:aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"gateway_id":{"references":["aws_internet_gateway.gw.id","aws_internet_gateway.gw"]},"route_table_id":{"references":["aws_route_table.public.id","aws_route_table.public"]},"timeouts":{"create":{"constant_value":"5m"}}},"schema_version":0},{"address":"aws_route_table.private","mode":"managed","type":"aws_route_table","name":"private","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["local.common_tags","var.name","count.index"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":0,"count_expression":{"references":["local.max_subnet_length","local.nat_gateway_count"]}},{"address":"aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_config_key":"vpc:aws","expressions":{"tags":{"references":["local.common_tags","var.name"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":0},{"address":"aws_route_table_association.private","mode":"managed","type":"aws_route_table_association","name":"private","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.private","var.single_nat_gateway","count.index"]},"subnet_id":{"references":["aws_subnet.private","count.index"]}},"schema_version":0,"count_expression":{"references":["aws_subnet.private"]}},{"address":"aws_route_table_association.public","mode":"managed","type":"aws_route_table_association","name":"public","provider_config_key":"vpc:aws","expressions":{"route_table_id":{"references":["aws_route_table.public.id","aws_route_table.public"]},"subnet_id":{"references":["aws_subnet.public","count.index"]}},"schema_version":0,"count_expression":{"references":["aws_subnet.public"]}},{"address":"aws_subnet.private","mode":"managed","type":"aws_subnet","name":"private","provider_config_key":"vpc:aws","expressions":{"availability_zone":{"references":["local.zone_names","count.index"]},"cidr_block":{"references":["var.private_subnets","var.high_availability","aws_vpc.main.cidr_block","aws_vpc.main","count.index","aws_vpc.main.cidr_block","aws_vpc.main","var.private_subnets","count.index"]},"tags":{"references":["local.common_tags","var.name","local.zone_names","count.index"]},"timeouts":{"delete":{"constant_value":"40m"}},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":1,"count_expression":{"references":["local.max_subnet_length"]}},{"address":"aws_subnet.public","mode":"managed","type":"aws_subnet","name":"public","provider_config_key":"vpc:aws","expressions":{"availability_zone":{"references":["local.zone_names","count.index"]},"cidr_block":{"references":["var.public_subnets","var.high_availability","aws_vpc.main.cidr_block","aws_vpc.main","count.index","local.max_subnet_length","aws_vpc.main.cidr_block","aws_vpc.main","var.public_subnets","count.index"]},"tags":{"references":["local.common_tags","var.name","local.zone_names","count.index"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":1,"count_expression":{"references":["local.max_subnet_length"]}},{"address":"aws_vpc.main","mode":"managed","type":"aws_vpc","name":"main","provider_config_key":"vpc:aws","expressions":{"cidr_block":{"references":["var.cidr"]},"enable_dns_hostnames":{"constant_value":true},"enable_dns_support":{"constant_value":true},"tags":{"references":["local.common_tags","var.name"]}},"schema_version":1},{"address":"data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_config_key":"vpc:aws","expressions":{"state":{"constant_value":"available"}},"schema_version":0},{"address":"data.aws_iam_policy_document.vpc_flow_logs_service_principal","mode":"data","type":"aws_iam_policy_document","name":"vpc_flow_logs_service_principal","provider_config_key":"vpc:aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"effect":{"constant_value":"Allow"},"principals":[{"identifiers":{"constant_value":["vpc-flow-logs.amazonaws.com"]},"type":{"constant_value":"Service"}}]}]},"schema_version":0,"count_expression":{"references":["var.enable_flow_log"]}},{"address":"data.aws_iam_policy_document.vpc_metrics_flow_logs_write","mode":"data","type":"aws_iam_policy_document","name":"vpc_metrics_flow_logs_write","provider_config_key":"vpc:aws","expressions":{"statement":[{"actions":{"constant_value":["logs:CreateLogStream","logs:PutLogEvents","logs:DescribeLogGroups","logs:DescribeLogStreams"]},"effect":{"constant_value":"Allow"},"resources":{"references":["aws_cloudwatch_log_group.flow_logs[0].arn","aws_cloudwatch_log_group.flow_logs[0]","aws_cloudwatch_log_group.flow_logs","aws_cloudwatch_log_group.flow_logs[0].arn","aws_cloudwatch_log_group.flow_logs[0]","aws_cloudwatch_log_group.flow_logs"]}}]},"schema_version":0,"count_expression":{"references":["var.enable_flow_log"]}}],"variables":{"allow_https_request_in":{"default":false,"description":"(Optional, default 'false') Allow HTTPS connections on port 443 in from the internet"},"allow_https_request_in_response":{"default":false,"description":"(Optional, default 'false') Allow a response back to the internet in reply to a request"},"allow_https_request_out":{"default":false,"description":"(Optional, default 'false') Allow HTTPS connections on port 443 out to the internet"},"allow_https_request_out_response":{"default":false,"description":"(Optional, default 'false') Allow a response back from the internet in reply to a request"},"billing_tag_key":{"default":"CostCentre","description":"(Optional, default 'CostCentre') The name of the billing tag"},"billing_tag_value":{"description":"(Required) The value of the billing tag"},"block_rdp":{"default":true,"description":"(Optional, default 'true') Whether or not to block Port 3389"},"block_ssh":{"default":true,"description":"(Optional, default 'true') Whether or not to block Port 22"},"cidr":{"default":"10.0.0.0/16","description":"(Optional, default '10.0.0.0/16') The CIDR block for the VPC"},"enable_eip":{"default":true,"description":"(Optional, default 'true') Enables Elastic IPs, disabling is mainly used for testing purposes"},"enable_flow_log":{"default":false,"description":"(Optional, default 'false') Whether or not to enable VPC Flow Logs"},"high_availability":{"default":false,"description":"(Optional, default 'false') Create 3 public and 3 private subnets across 3 availability zones in the region."},"name":{"description":"(Required) The name of the vpc"},"private_subnets":{"default":[],"description":"(Optional, default []) A list of private subnets inside the VPC"},"public_subnets":{"default":[],"description":"(Optional, default []) A list of public subnets inside the VPC"},"single_nat_gateway":{"default":false,"description":"Should be true if you want to provision a single shared NAT Gateway across all of your private networks"}}}}}}}}
